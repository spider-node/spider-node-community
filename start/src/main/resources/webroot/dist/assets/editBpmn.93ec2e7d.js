import{b as ie,c as k,d as le,e as ce,g as de}from"./axios.b4efa92c.js";import{X as ue,Z as me,r as y,e as pe,f as W,g as E,o as C,v as B,w as S,i as m,l as F,u as K,$ as ve,G as R,b as H,V as Z,c as I,y as Q,a as D,x as Y,N as fe,T as ge,F as ee,q as ye,U as he,k as U,p as Ee,m as be}from"./index.14aff2f2.js";import{i as te}from"./types.22d094ed.js";import{u as _e,a as Ce}from"./function.ff861cbd.js";import{a as Se}from"./bpmn.fe760724.js";import{u as $}from"./index.6a0f63a4.js";import{S as we,s as Te}from"./field.c70b8272.js";import{a as De}from"./sdk.6707e230.js";import"./index.82e1f583.js";const L=ue("bpmn",{state:()=>({nodeId:null,selectDialogVisible:!1}),getters:{},actions:{SetSelectDialogVisible(e){this.selectDialogVisible=e},SetNodeInfo(e){this.nodeId=me(e)}},persist:{enabled:!0,strategies:[{storage:sessionStorage}]}});function j(e,n,t){const a=encodeURIComponent(t);return{filename:`${n}.${e.toLowerCase()}`,href:`data:application/${e==="svg"?"text/xml":"bpmn20-xml"};charset=UTF-8,${a}`,data:t}}function X(e,n){if(e&&n){const t=document.createElement("a");t.download=n,t.href=e,t.click(),URL.revokeObjectURL(t.href)}}function q(e,n,t,a){const s=a.create(e,n);return t&&(s.$parent=t),s}function xe(e,n){return`<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions 
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL"
  xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI"
  xmlns:dc="http://www.omg.org/spec/DD/20100524/DC"
  xmlns:di="http://www.omg.org/spec/DD/20100524/DI"
  targetNamespace="http://bpmn.io/schema/bpmn"
  id="Definitions_0001">
  <bpmn:process id="${e}" name="${n}" isExecutable="true" />
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="${e}" />
  </bpmndi:BPMNDiagram>
</bpmn:definitions>`}async function z(e,n,t){try{const a=Date.now(),{processId:s,processName:u}=t||{},f=s||`Process_${a}`,p=u||`\u4E1A\u52A1\u6D41\u7A0B_${a}`,r=n||xe(f,p),{warnings:d}=await e.importXML(r);d&&d.length&&console.warnings(d)}catch(a){console.error(a)}}const J=L();class ne{constructor(n,t,a,s,u,f,p,r){this.create=a,this.elementFactory=s,this.translate=f,this.modeling=p,this.bpmnFactory=r,n.autoPlace!==!1&&(this.autoPlace=u.get("autoPlace",!1)),t.registerProvider(this)}getContextPadEntries(n){const{translate:t}=this;function a(){J.SetNodeInfo(n.id),J.SetSelectDialogVisible(!0)}function s(){return{group:"edit",className:"icon-custom select-data",title:t("\u7F16\u8F91"),action:{click:a}}}return{edit:s()}}}ne.$inject=["config","contextPad","create","elementFactory","injector","translate","modeling","bpmnFactory"];var Ie={__init__:["customContextPad"],customContextPad:["type",ne]},Pe={Id:"\u7F16\u53F7",Name:"\u540D\u79F0",General:"\u5E38\u89C4",Details:"\u8BE6\u60C5","Message Name":"\u6D88\u606F\u540D\u79F0",Message:"\u6D88\u606F",Initiator:"\u521B\u5EFA\u8005","Asynchronous continuations":"\u6301\u7EED\u5F02\u6B65","Asynchronous before":"\u5F02\u6B65\u524D","Asynchronous after":"\u5F02\u6B65\u540E","Job configuration":"\u5DE5\u4F5C\u914D\u7F6E",Exclusive:"\u6392\u9664","Job Priority":"\u5DE5\u4F5C\u4F18\u5148\u7EA7","Retry Time Cycle":"\u91CD\u8BD5\u65F6\u95F4\u5468\u671F",Documentation:"\u6587\u6863","Element Documentation":"\u5143\u7D20\u6587\u6863","History Configuration":"\u5386\u53F2\u914D\u7F6E","History Time To Live":"\u5386\u53F2\u7684\u751F\u5B58\u65F6\u95F4",Forms:"\u8868\u5355","Activate the global connect tool":"\u6FC0\u6D3B\u5168\u5C40\u8FDE\u63A5\u5DE5\u5177","Append {type}":"\u8FFD\u52A0 {type}","Append EndEvent":"\u8FFD\u52A0 \u7ED3\u675F\u4E8B\u4EF6 ","Append Task":"\u8FFD\u52A0 \u4EFB\u52A1","Append Gateway":"\u8FFD\u52A0 \u7F51\u5173","Append Intermediate/Boundary Event":"\u8FFD\u52A0 \u4E2D\u95F4/\u8FB9\u754C \u4E8B\u4EF6","Add Lane above":"\u5728\u4E0A\u9762\u6DFB\u52A0\u9053","Divide into two Lanes":"\u5206\u5272\u6210\u4E24\u4E2A\u9053","Divide into three Lanes":"\u5206\u5272\u6210\u4E09\u4E2A\u9053","Add Lane below":"\u5728\u4E0B\u9762\u6DFB\u52A0\u9053","Append compensation activity":"\u8FFD\u52A0\u8865\u507F\u6D3B\u52A8","Change type":"\u4FEE\u6539\u7C7B\u578B","Connect using Association":"\u4F7F\u7528\u5173\u8054\u8FDE\u63A5","Connect using Sequence/MessageFlow or Association":"\u4F7F\u7528\u987A\u5E8F/\u6D88\u606F\u6D41\u6216\u8005\u5173\u8054\u8FDE\u63A5","Connect using DataInputAssociation":"\u4F7F\u7528\u6570\u636E\u8F93\u5165\u5173\u8054\u8FDE\u63A5",Remove:"\u79FB\u9664","Activate the hand tool":"\u6FC0\u6D3B\u6293\u624B\u5DE5\u5177","Activate the lasso tool":"\u6FC0\u6D3B\u5957\u7D22\u5DE5\u5177","Activate the create/remove space tool":"\u6FC0\u6D3B\u521B\u5EFA/\u5220\u9664\u7A7A\u95F4\u5DE5\u5177","Create expanded SubProcess":"\u521B\u5EFA\u6269\u5C55\u5B50\u8FC7\u7A0B","Create IntermediateThrowEvent/BoundaryEvent":"\u521B\u5EFA\u4E2D\u95F4\u629B\u51FA\u4E8B\u4EF6/\u8FB9\u754C\u4E8B\u4EF6","Create Pool/Participant":"\u521B\u5EFA\u6C60/\u53C2\u4E0E\u8005","Parallel Multi Instance":"\u5E76\u884C\u591A\u91CD\u4E8B\u4EF6","Sequential Multi Instance":"\u65F6\u5E8F\u591A\u91CD\u4E8B\u4EF6",DataObjectReference:"\u6570\u636E\u5BF9\u8C61\u53C2\u8003",DataStoreReference:"\u6570\u636E\u5B58\u50A8\u53C2\u8003",Loop:"\u5FAA\u73AF","Ad-hoc":"\u5373\u5E2D","Create {type}":"\u521B\u5EFA {type}","Create Task":"\u521B\u5EFA\u4EFB\u52A1","Create StartEvent":"\u521B\u5EFA\u5F00\u59CB\u4E8B\u4EF6","Create EndEvent":"\u521B\u5EFA\u7ED3\u675F\u4E8B\u4EF6","Create Group":"\u521B\u5EFA\u7EC4",Task:"\u4EFB\u52A1","Send Task":"\u53D1\u9001\u4EFB\u52A1","Receive Task":"\u63A5\u6536\u4EFB\u52A1","User Task":"\u7528\u6237\u4EFB\u52A1","Manual Task":"\u624B\u5DE5\u4EFB\u52A1","Business Rule Task":"\u4E1A\u52A1\u89C4\u5219\u4EFB\u52A1","Service Task":"\u670D\u52A1\u4EFB\u52A1","Script Task":"\u811A\u672C\u4EFB\u52A1","Call Activity":"\u8C03\u7528\u6D3B\u52A8","Sub Process (collapsed)":"\u5B50\u6D41\u7A0B\uFF08\u6298\u53E0\u7684\uFF09","Sub Process (expanded)":"\u5B50\u6D41\u7A0B\uFF08\u5C55\u5F00\u7684\uFF09","Start Event":"\u5F00\u59CB\u4E8B\u4EF6",StartEvent:"\u5F00\u59CB\u4E8B\u4EF6","Intermediate Throw Event":"\u4E2D\u95F4\u4E8B\u4EF6","End Event":"\u7ED3\u675F\u4E8B\u4EF6",EndEvent:"\u7ED3\u675F\u4E8B\u4EF6","Create Gateway":"\u521B\u5EFA\u7F51\u5173",GateWay:"\u7F51\u5173","Create Intermediate/Boundary Event":"\u521B\u5EFA\u4E2D\u95F4/\u8FB9\u754C\u4E8B\u4EF6","Message Start Event":"\u6D88\u606F\u5F00\u59CB\u4E8B\u4EF6","Timer Start Event":"\u5B9A\u65F6\u5F00\u59CB\u4E8B\u4EF6","Conditional Start Event":"\u6761\u4EF6\u5F00\u59CB\u4E8B\u4EF6","Signal Start Event":"\u4FE1\u53F7\u5F00\u59CB\u4E8B\u4EF6","Error Start Event":"\u9519\u8BEF\u5F00\u59CB\u4E8B\u4EF6","Escalation Start Event":"\u5347\u7EA7\u5F00\u59CB\u4E8B\u4EF6","Compensation Start Event":"\u8865\u507F\u5F00\u59CB\u4E8B\u4EF6","Message Start Event (non-interrupting)":"\u6D88\u606F\u5F00\u59CB\u4E8B\u4EF6\uFF08\u975E\u4E2D\u65AD\uFF09","Timer Start Event (non-interrupting)":"\u5B9A\u65F6\u5F00\u59CB\u4E8B\u4EF6\uFF08\u975E\u4E2D\u65AD\uFF09","Conditional Start Event (non-interrupting)":"\u6761\u4EF6\u5F00\u59CB\u4E8B\u4EF6\uFF08\u975E\u4E2D\u65AD\uFF09","Signal Start Event (non-interrupting)":"\u4FE1\u53F7\u5F00\u59CB\u4E8B\u4EF6\uFF08\u975E\u4E2D\u65AD\uFF09","Escalation Start Event (non-interrupting)":"\u5347\u7EA7\u5F00\u59CB\u4E8B\u4EF6\uFF08\u975E\u4E2D\u65AD\uFF09","Message Intermediate Catch Event":"\u6D88\u606F\u4E2D\u95F4\u6355\u83B7\u4E8B\u4EF6","Message Intermediate Throw Event":"\u6D88\u606F\u4E2D\u95F4\u629B\u51FA\u4E8B\u4EF6","Timer Intermediate Catch Event":"\u5B9A\u65F6\u4E2D\u95F4\u6355\u83B7\u4E8B\u4EF6","Escalation Intermediate Throw Event":"\u5347\u7EA7\u4E2D\u95F4\u629B\u51FA\u4E8B\u4EF6","Conditional Intermediate Catch Event":"\u6761\u4EF6\u4E2D\u95F4\u6355\u83B7\u4E8B\u4EF6","Link Intermediate Catch Event":"\u94FE\u63A5\u4E2D\u95F4\u6355\u83B7\u4E8B\u4EF6","Link Intermediate Throw Event":"\u94FE\u63A5\u4E2D\u95F4\u629B\u51FA\u4E8B\u4EF6","Compensation Intermediate Throw Event":"\u8865\u507F\u4E2D\u95F4\u629B\u51FA\u4E8B\u4EF6","Signal Intermediate Catch Event":"\u4FE1\u53F7\u4E2D\u95F4\u6355\u83B7\u4E8B\u4EF6","Signal Intermediate Throw Event":"\u4FE1\u53F7\u4E2D\u95F4\u629B\u51FA\u4E8B\u4EF6","Message End Event":"\u6D88\u606F\u7ED3\u675F\u4E8B\u4EF6","Escalation End Event":"\u5B9A\u65F6\u7ED3\u675F\u4E8B\u4EF6","Error End Event":"\u9519\u8BEF\u7ED3\u675F\u4E8B\u4EF6","Cancel End Event":"\u53D6\u6D88\u7ED3\u675F\u4E8B\u4EF6","Compensation End Event":"\u8865\u507F\u7ED3\u675F\u4E8B\u4EF6","Signal End Event":"\u4FE1\u53F7\u7ED3\u675F\u4E8B\u4EF6","Terminate End Event":"\u7EC8\u6B62\u7ED3\u675F\u4E8B\u4EF6","Message Boundary Event":"\u6D88\u606F\u8FB9\u754C\u4E8B\u4EF6","Message Boundary Event (non-interrupting)":"\u6D88\u606F\u8FB9\u754C\u4E8B\u4EF6\uFF08\u975E\u4E2D\u65AD\uFF09","Timer Boundary Event":"\u5B9A\u65F6\u8FB9\u754C\u4E8B\u4EF6","Timer Boundary Event (non-interrupting)":"\u5B9A\u65F6\u8FB9\u754C\u4E8B\u4EF6\uFF08\u975E\u4E2D\u65AD\uFF09","Escalation Boundary Event":"\u5347\u7EA7\u8FB9\u754C\u4E8B\u4EF6","Escalation Boundary Event (non-interrupting)":"\u5347\u7EA7\u8FB9\u754C\u4E8B\u4EF6\uFF08\u975E\u4E2D\u65AD\uFF09","Conditional Boundary Event":"\u6761\u4EF6\u8FB9\u754C\u4E8B\u4EF6","Conditional Boundary Event (non-interrupting)":"\u6761\u4EF6\u8FB9\u754C\u4E8B\u4EF6\uFF08\u975E\u4E2D\u65AD\uFF09","Error Boundary Event":"\u9519\u8BEF\u8FB9\u754C\u4E8B\u4EF6","Cancel Boundary Event":"\u53D6\u6D88\u8FB9\u754C\u4E8B\u4EF6","Signal Boundary Event":"\u4FE1\u53F7\u8FB9\u754C\u4E8B\u4EF6","Signal Boundary Event (non-interrupting)":"\u4FE1\u53F7\u8FB9\u754C\u4E8B\u4EF6\uFF08\u975E\u4E2D\u65AD\uFF09","Compensation Boundary Event":"\u8865\u507F\u8FB9\u754C\u4E8B\u4EF6","Exclusive Gateway":"\u4E92\u65A5\u7F51\u5173","Parallel Gateway":"\u5E76\u884C\u7F51\u5173","Inclusive Gateway":"\u76F8\u5BB9\u7F51\u5173","Complex Gateway":"\u590D\u6742\u7F51\u5173","Event based Gateway":"\u4E8B\u4EF6\u7F51\u5173",Transaction:"\u8F6C\u8FD0","Sub Process":"\u5B50\u6D41\u7A0B","Event Sub Process":"\u4E8B\u4EF6\u5B50\u6D41\u7A0B","Collapsed Pool":"\u6298\u53E0\u6C60","Expanded Pool":"\u5C55\u5F00\u6C60","no parent for {element} in {parent}":"\u5728{parent}\u91CC\uFF0C{element}\u6CA1\u6709\u7236\u7C7B","no shape type specified":"\u6CA1\u6709\u6307\u5B9A\u7684\u5F62\u72B6\u7C7B\u578B","flow elements must be children of pools/participants":"\u6D41\u5143\u7D20\u5FC5\u987B\u662F\u6C60/\u53C2\u4E0E\u8005\u7684\u5B50\u7C7B","out of bounds release":"out of bounds release","more than {count} child lanes":"\u5B50\u9053\u5927\u4E8E{count} ","element required":"\u5143\u7D20\u4E0D\u80FD\u4E3A\u7A7A","diagram not part of bpmn:Definitions":"\u6D41\u7A0B\u56FE\u4E0D\u7B26\u5408bpmn\u89C4\u8303","no diagram to display":"\u6CA1\u6709\u53EF\u5C55\u793A\u7684\u6D41\u7A0B\u56FE","no process or collaboration to display":"\u6CA1\u6709\u53EF\u5C55\u793A\u7684\u6D41\u7A0B/\u534F\u4F5C","element {element} referenced by {referenced}#{property} not yet drawn":"\u7531{referenced}#{property}\u5F15\u7528\u7684{element}\u5143\u7D20\u4ECD\u672A\u7ED8\u5236","already rendered {element}":"{element} \u5DF2\u88AB\u6E32\u67D3","failed to import {element}":"\u5BFC\u5165{element}\u5931\u8D25",Id:"\u7F16\u53F7",Name:"\u540D\u79F0",General:"\u5E38\u89C4",Details:"\u8BE6\u60C5","Message Name":"\u6D88\u606F\u540D\u79F0",Message:"\u6D88\u606F",Initiator:"\u521B\u5EFA\u8005","Asynchronous Continuations":"\u6301\u7EED\u5F02\u6B65","Asynchronous Before":"\u5F02\u6B65\u524D","Asynchronous After":"\u5F02\u6B65\u540E","Job Configuration":"\u5DE5\u4F5C\u914D\u7F6E",Exclusive:"\u6392\u9664","Job Priority":"\u5DE5\u4F5C\u4F18\u5148\u7EA7","Retry Time Cycle":"\u91CD\u8BD5\u65F6\u95F4\u5468\u671F",Documentation:"\u6587\u6863","Element Documentation":"\u5143\u7D20\u6587\u6863","History Configuration":"\u5386\u53F2\u914D\u7F6E","History Time To Live":"\u5386\u53F2\u7684\u751F\u5B58\u65F6\u95F4",Forms:"\u8868\u5355","Form Key":"\u8868\u5355key","Form Fields":"\u8868\u5355\u5B57\u6BB5","Business Key":"\u4E1A\u52A1key","Form Field":"\u8868\u5355\u5B57\u6BB5",ID:"\u7F16\u53F7",Type:"\u7C7B\u578B",Label:"\u540D\u79F0","Default Value":"\u9ED8\u8BA4\u503C",Validation:"\u6821\u9A8C","Add Constraint":"\u6DFB\u52A0\u7EA6\u675F",Config:"\u914D\u7F6E",Properties:"\u5C5E\u6027","Add Property":"\u6DFB\u52A0\u5C5E\u6027",Value:"\u503C",Add:"\u6DFB\u52A0",Values:"\u503C","Add Value":"\u6DFB\u52A0\u503C",Listeners:"\u76D1\u542C\u5668","Execution Listener":"\u6267\u884C\u76D1\u542C","Event Type":"\u4E8B\u4EF6\u7C7B\u578B","Listener Type":"\u76D1\u542C\u5668\u7C7B\u578B","Java Class":"Java\u7C7B",Expression:"\u8868\u8FBE\u5F0F","Must provide a value":"\u5FC5\u987B\u63D0\u4F9B\u4E00\u4E2A\u503C","Delegate Expression":"\u4EE3\u7406\u8868\u8FBE\u5F0F",Script:"\u811A\u672C","Script Format":"\u811A\u672C\u683C\u5F0F","Script Type":"\u811A\u672C\u7C7B\u578B","Inline Script":"\u5185\u8054\u811A\u672C","External Script":"\u5916\u90E8\u811A\u672C",Resource:"\u8D44\u6E90","Field Injection":"\u5B57\u6BB5\u6CE8\u5165",Extensions:"\u6269\u5C55","Input/Output":"\u8F93\u5165/\u8F93\u51FA","Input Parameters":"\u8F93\u5165\u53C2\u6570","Output Parameters":"\u8F93\u51FA\u53C2\u6570",Parameters:"\u53C2\u6570","Output Parameter":"\u8F93\u51FA\u53C2\u6570","Timer Definition Type":"\u5B9A\u65F6\u5668\u5B9A\u4E49\u7C7B\u578B","Timer Definition":"\u5B9A\u65F6\u5668\u5B9A\u4E49",Date:"\u65E5\u671F",Duration:"\u6301\u7EED",Cycle:"\u5FAA\u73AF",Signal:"\u4FE1\u53F7","Signal Name":"\u4FE1\u53F7\u540D\u79F0",Escalation:"\u5347\u7EA7",Error:"\u9519\u8BEF","Link Name":"\u94FE\u63A5\u540D\u79F0",Condition:"\u6761\u4EF6\u540D\u79F0","Variable Name":"\u53D8\u91CF\u540D\u79F0","Variable Event":"\u53D8\u91CF\u4E8B\u4EF6","Specify more than one variable change event as a comma separated list.":"\u591A\u4E2A\u53D8\u91CF\u4E8B\u4EF6\u4EE5\u9017\u53F7\u9694\u5F00","Wait for Completion":"\u7B49\u5F85\u5B8C\u6210","Activity Ref":"\u6D3B\u52A8\u53C2\u8003","Version Tag":"\u7248\u672C\u6807\u7B7E",Executable:"\u53EF\u6267\u884C\u6587\u4EF6","External Task Configuration":"\u6269\u5C55\u4EFB\u52A1\u914D\u7F6E","Task Priority":"\u4EFB\u52A1\u4F18\u5148\u7EA7",External:"\u5916\u90E8",Connector:"\u8FDE\u63A5\u5668","Must configure Connector":"\u5FC5\u987B\u914D\u7F6E\u8FDE\u63A5\u5668","Connector Id":"\u8FDE\u63A5\u5668\u7F16\u53F7",Implementation:"\u5B9E\u73B0\u65B9\u5F0F","Field Injections":"\u5B57\u6BB5\u6CE8\u5165",Fields:"\u5B57\u6BB5","Result Variable":"\u7ED3\u679C\u53D8\u91CF",Topic:"\u4E3B\u9898","Configure Connector":"\u914D\u7F6E\u8FDE\u63A5\u5668","Input Parameter":"\u8F93\u5165\u53C2\u6570",Assignee:"\u4EE3\u7406\u4EBA","Candidate Users":"\u5019\u9009\u7528\u6237","Candidate Groups":"\u5019\u9009\u7EC4","Due Date":"\u5230\u671F\u65F6\u95F4","Follow Up Date":"\u8DDF\u8E2A\u65E5\u671F",Priority:"\u4F18\u5148\u7EA7","The follow up date as an EL expression (e.g. ${someDate} or an ISO date (e.g. 2015-06-26T09:54:00)":"\u8DDF\u8E2A\u65E5\u671F\u5FC5\u987B\u7B26\u5408EL\u8868\u8FBE\u5F0F\uFF0C\u5982\uFF1A ${someDate} ,\u6216\u8005\u4E00\u4E2AISO\u6807\u51C6\u65E5\u671F\uFF0C\u5982\uFF1A2015-06-26T09:54:00","The due date as an EL expression (e.g. ${someDate} or an ISO date (e.g. 2015-06-26T09:54:00)":"\u8DDF\u8E2A\u65E5\u671F\u5FC5\u987B\u7B26\u5408EL\u8868\u8FBE\u5F0F\uFF0C\u5982\uFF1A ${someDate} ,\u6216\u8005\u4E00\u4E2AISO\u6807\u51C6\u65E5\u671F\uFF0C\u5982\uFF1A2015-06-26T09:54:00",Variables:"\u53D8\u91CF","Candidate Starter Configuration":"\u5019\u9009\u5F00\u59CB\u914D\u7F6E","Task Listener":"\u4EFB\u52A1\u76D1\u542C\u5668","Candidate Starter Groups":"\u5019\u9009\u5F00\u59CB\u7EC4","Candidate Starter Users":"\u5019\u9009\u5F00\u59CB\u7528\u6237","Tasklist Configuration":"\u4EFB\u52A1\u5217\u8868\u914D\u7F6E",Startable:"\u542F\u52A8","Specify more than one group as a comma separated list.":"\u6307\u5B9A\u591A\u4E2A\u7EC4,\u7528\u9017\u53F7\u5206\u9694","Specify more than one user as a comma separated list.":"\u6307\u5B9A\u591A\u4E2A\u7528\u6237,\u7528\u9017\u53F7\u5206\u9694","This maps to the process definition key.":"\u8FD9\u4F1A\u6620\u5C04\u4E3A\u6D41\u7A0B\u5B9A\u4E49\u7684\u952E","CallActivity Type":"\u8C03\u7528\u6D3B\u52A8\u7C7B\u578B","Condition Type":"\u6761\u4EF6\u7C7B\u578B","Create UserTask":"\u521B\u5EFA\u7528\u6237\u4EFB\u52A1","Create CallActivity":"\u521B\u5EFA\u8C03\u7528\u6D3B\u52A8","Called Element":"\u8C03\u7528\u5143\u7D20","Create DataObjectReference":"\u521B\u5EFA\u6570\u636E\u5BF9\u8C61\u5F15\u7528","Create DataStoreReference":"\u521B\u5EFA\u6570\u636E\u5B58\u50A8\u5F15\u7528","Multi Instance":"\u591A\u5B9E\u4F8B","Loop Cardinality":"\u5B9E\u4F8B\u6570\u91CF",Collection:"\u4EFB\u52A1\u53C2\u4E0E\u4EBA\u5217\u8868","Element Variable":"\u5143\u7D20\u53D8\u91CF","Completion Condition":"\u5B8C\u6210\u6761\u4EF6"};const ke=(e={})=>({prop:"order",label:"\u5E8F\u53F7",type:"index",width:60,...e}),Me=(e={})=>({prop:"action",label:"\u64CD\u4F5C",width:"180px",fixed:"right",...e}),M=(e,n,t={})=>typeof e=="string"?{prop:e,label:n,...t}:typeof e=="object"?e:{};var Be={__name:"selectDialog",emits:["success"],setup(e,{expose:n,emit:t}){const a=y({background:!0,page:1,size:10,layout:"prev, pager, next",total:0}),s=y({status:we.OPEN}),u=y([$("areaName","\u9886\u57DF\u540D\u79F0"),$("name","\u57DF\u529F\u80FD\u540D\u79F0")]),f=y([ke(),M("name","\u57DF\u529F\u80FD\u540D\u79F0"),M("taskComponent","\u8282\u70B9\u7EC4\u4EF6"),M("taskService","\u8282\u70B9\u670D\u52A1"),M("serviceTaskType","\u8282\u70B9\u7C7B\u578B",{render:({row:h})=>Te[h.serviceTaskType]}),$("areaName","\u9886\u57DF\u540D\u79F0"),Me()]),p=async({searchData:h})=>{const{nodes:v}=await Se({page:1,size:100,...h});return{records:v,total:100}},r=L(),d=pe(()=>r.selectDialogVisible),g=async h=>{r.SetSelectDialogVisible(!1),R({message:"\u606D\u559C\u4F60\uFF0C\u64CD\u4F5C\u6210\u529F",type:"success"}),t("success",h)},b=()=>{r.SetSelectDialogVisible(!1)};return n({}),W(()=>{r.SetSelectDialogVisible(!1)}),(h,v)=>{const x=E("el-button"),A=E("yun-pro-table"),P=E("yun-drawer");return C(),B(P,{modelValue:K(d),"onUpdate:modelValue":v[2]||(v[2]=_=>ve(d)?d.value=_:null),size:"large",title:"\u9009\u62E9\u57DF\u529F\u80FD","show-confirm-button":!1,"cancel-button-text":"\u5173\u95ED",onConfirm:g,onClosed:b},{default:S(()=>[m(A,{ref:"proTableRef",searchData:s.value,"onUpdate:searchData":v[0]||(v[0]=_=>s.value=_),pagination:a.value,"onUpdate:pagination":v[1]||(v[1]=_=>a.value=_),"search-fields":u.value,"table-columns":f.value,"remote-method":p},{t_action:S(({row:_})=>[m(x,{type:"action",onClick:G=>g(_)},{default:S(()=>[F(" \u9009\u62E9 ")]),_:2},1032,["onClick"])]),_:1},8,["searchData","pagination","search-fields","table-columns"])]),_:1},8,["modelValue"])}}};const Fe={props:{multiple:{type:Boolean,default:!1},isPreview:{type:Boolean,default:!1},limit:{type:Number,default:2},accept:{type:String,default:"*"},listType:{type:String,default:"text"},tips:{type:String,default:""},value:{type:Array,default:()=>[]},beforeUpload:{type:Function,default:e=>e&&e.size>1024*1024*5?(R.warning("\u6587\u4EF6\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC75M\uFF01"),!1):!0},beforeRemove:{type:Function,default:()=>!0}},emits:["fileChange"],data(){return{loading:{httpRequest:!1},fileName:void 0,fileList:[],uploadFileList:[],imgUrl:""}},watch:{value:{immediate:!0,deep:!0,handler(e){const n=[];e.forEach(t=>{const a={name:t.fileName,url:t.fileUrl,...t};n.push(a)}),this.uploadFileList=n}}},created(){},methods:{async httpRequest({file:e}){try{this.loading.httpRequest=!0;const n=e.name.lastIndexOf("."),t=e.name.slice(n+1),a=new FormData;a.append("file",e),a.append("fileExtension",t);const s=await De(a);this.loading.httpRequest=!1;const u={fileName:e.name,fileUrl:s.patch,uuid:e.uid};this.uploadFileList=[u],this.handSubmit()}finally{this.loading.httpRequest=!1}},handSubmit(){const e=this.uploadFileList.map(n=>n);this.$emit("fileChange",e)},handleRemove(e){const n=this.uploadFileList.findIndex(t=>t.uid===e.uid);n!==-1&&this.uploadFileList.splice(n,1),this.handSubmit()},handleExceed(e,n){this.$message.warning(`\u5F53\u524D\u9650\u5236\u9009\u62E9 ${this.limit} \u4E2A\u6587\u4EF6\uFF0C\u672C\u6B21\u9009\u62E9\u4E86 ${e.length} \u4E2A\u6587\u4EF6\uFF0C\u5171\u9009\u62E9\u4E86 ${e.length+n.length} \u4E2A\u6587\u4EF6`)}}},Le={class:"file_upload"},Re={key:0},Ae={class:"el-upload__tip"};function Ve(e,n,t,a,s,u){const f=E("el-button"),p=E("el-upload"),r=Z("loading");return C(),I("div",Le,[Q((C(),B(p,ge({"element-loading-text":"\u4E0A\u4F20\u4E2D, \u8BF7\u7A0D\u540E...","on-remove":u.handleRemove,"before-remove":t.beforeRemove,"before-upload":t.beforeUpload,"http-request":u.httpRequest,action:"string","file-list":[],"on-exceed":u.handleExceed,accept:t.accept,limit:t.limit,multiple:t.multiple},e.$attrs),{tip:S(()=>[D("div",Ae,Y(t.tips),1)]),default:S(()=>[e.$slots.uploadbtn?(C(),I("span",Re,[fe(e.$slots,"uploadbtn")])):(C(),B(f,{key:1,type:"primary"},{default:S(()=>[F(" \u9009\u62E9\u6587\u4EF6 ")]),_:1}))]),_:3},16,["on-remove","before-remove","before-upload","http-request","on-exceed","accept","limit","multiple"])),[[r,s.loading.httpRequest]])])}var Ne=H(Fe,[["render",Ve]]),Ue={__name:"saveDialog",emits:["success"],setup(e,{expose:n,emit:t}){const a=y(!1),s=y({startEventId:void 0}),u=g=>{var b;s.value.bpmnUrl=(b=g[0])==null?void 0:b.fileUrl},f=y([{label:"\u8D77\u59CBid",prop:"startEventId"},{label:"bpmn\u7684Url",prop:"bpmnUrl",type:"input",render:()=>m(ee,null,[m(E("el-row"),{align:"middle",justify:"space-between"},{default:()=>[!te(s.value.bpmnUrl)&&m("div",{class:"sdk-url-text "},[m(E("yun-ellipsis"),{text:s.value.bpmnUrl,"visible-line":2},null)]),m("div",null,[m(Ne,{onFileChange:u},null)])]})])},{label:"bpmn\u540D\u79F0",prop:"bpmnName",type:"input"}]),p=g=>{a.value=!0,s.value=g},r=async g=>{await _e(s.value),R({message:"\u606D\u559C\u4F60\uFF0C\u64CD\u4F5C\u6210\u529F",type:"success"}),a.value=!1,t("success",g)},d=()=>{s.value={},a.value=!1};return W(()=>{a.value=!1}),n({show:p}),(g,b)=>{const h=E("yun-pro-form"),v=E("yun-drawer");return C(),B(v,{modelValue:a.value,"onUpdate:modelValue":b[0]||(b[0]=x=>a.value=x),size:"large",title:"\u63D0\u4EA4\u4FDD\u5B58",onConfirm:r,onClosed:d},{default:S(()=>[m(h,{ref:"formRef",form:s.value,columns:f.value,"form-props":{labelWidth:135},config:{colProps:{span:24}}},null,8,["form","columns"])]),_:1},8,["modelValue"])}}};const $e=e=>(Ee("data-v-194d7da7"),e=e(),be(),e),qe={class:"actions"},Ge={class:"flex flex-row"},Oe={class:"container"},je={class:"modeler"},Xe=$e(()=>D("div",{id:"bpmn-canvas"},null,-1)),ze={key:0,id:"properties"},Je={__name:"editBpmn",setup(e){const n={VIEW:"VIEW",EDIT:"EDIT"},t=y(!1),a=ye(),s=n.EDIT,{id:u}=a.query,f=y(),p=y();let r=null;const d=y({bpmnUrl:void 0,bpmnName:void 0}),g=(i,o)=>(o=o||{},i=Pe[i]||i,i.replace(/{([^}]+)}/g,(l,c)=>o[c]||`{${c}}`)),b=()=>{const i=r.get("eventBus");["element.click","element.changed"].forEach(l=>{i.on(l,c=>{!c||c.element.type==="bpmn:Process"||console.log(c)})})},h=()=>{b()},v=()=>{console.log("\u521B\u5EFA\u6210\u529F!"),h()},x=async i=>{await r.importXML(i,o=>{o?console.error(o):v()})},A=async()=>await ce({method:"get",timeout:12e4,url:d.value.bpmnUrl,headers:{"Content-Type":"multipart/form-data"}}),P=(i={taskComponent:"1",taskService:"2",serviceTaskType:"3"})=>{const o=r.get("elementRegistry"),l=r.get("modeling"),c=r.get("moddle"),T=L(),w=o.get(T.nodeId),O=de(w),V=q("bpmn:ExtensionElements",{values:[]},O,c),N=q("camunda:Properties",{values:[]},V,c),oe=[{name:"task-component",valueKey:"taskComponent"},{name:"task-service",valueKey:"taskService"},{name:"service-task-type",valueKey:"serviceTaskType"}].map(({name:se,valueKey:re})=>q("camunda:Property",{name:se,value:i[re]},N,c));l.updateModdleProperties(w,N,{values:oe}),l.updateModdleProperties(w,V,{values:[N]}),l.updateModdleProperties(w,O,{extensionElements:V})},_=async()=>{const{versions:i}=await Ce({page:1,size:1,versionId:u});return console.log("output->getFormDataById",i),{...i[0]||{}}};he(async()=>{r=new ie({container:"#bpmn-canvas",propertiesPanel:{parent:"#properties"},additionalModules:[k.exports.BpmnPropertiesPanelModule,k.exports.BpmnPropertiesProviderModule,k.exports.CamundaPlatformPropertiesProviderModule,k.exports.CloudElementTemplatesPropertiesProviderModule,{translate:["value",g]},Ie],moddleExtensions:{camunda:le}}),L().SetSelectDialogVisible(!1),t.value=!0;try{const o=await _();if(d.value={...d.value,...o},te(d.value.bpmnUrl))z(r);else{const{data:l}=await A();x(l)}}catch(o){z(r),R.error(o)}finally{t.value=!1}});async function G(i="bpmn"){try{if(!r)return this.$message.error("\u6D41\u7A0B\u56FE\u5F15\u64CE\u521D\u59CB\u5316\u5931\u8D25");const o=r;if(i==="xml"||i==="bpmn"){const{err:l,xml:c}=await o.saveXML();l&&console.error(`[Process Designer Warn ]: ${l.message||l}`);const{href:T,filename:w}=j(i.toUpperCase(),new Date().getTime(),c);X(T,w)}else{const{err:l,svg:c}=await o.saveSVG();if(l)return console.error(l);const{href:T,filename:w}=j("SVG",new Date().getTime(),c);X(T,w)}}catch(o){console.error(`[Process Designer Warn ]: ${o.message||o}`)}}const ae=()=>{var l;const o=(l=r.get("elementRegistry").getAll().find(c=>c.type==="bpmn:StartEvent"))==null?void 0:l.id;p.value.show({...d.value,startEventId:o})};return(i,o)=>{const l=E("el-button"),c=Z("loading");return C(),I(ee,null,[D("div",qe,[D("div",null," name: "+Y(d.value.functionName),1),D("div",Ge,[m(l,{onClick:o[0]||(o[0]=T=>G())},{default:S(()=>[F(" \u4E0B\u8F7D bpmn \u81F3\u672C\u5730 ")]),_:1}),D("div",null,[m(l,{onClick:o[1]||(o[1]=T=>ae())},{default:S(()=>[F(" \u63D0\u4EA4\u4FDD\u5B58 ")]),_:1}),U(' <ImportFile :modeler="viewer" /> ')])])]),Q((C(),I("div",Oe,[D("div",je,[Xe,K(s)===n.EDIT?(C(),I("div",ze)):U("v-if",!0),U(" \u4FA7\u8FB9\u680F\u533A\u57DF ")])])),[[c,t.value]]),m(Be,{ref_key:"selectDialogRef",ref:f,onSuccess:P},null,512),m(Ue,{ref_key:"saveDialogRef",ref:p,onSuccess:P},null,512)],64)}}};var ot=H(Je,[["__scopeId","data-v-194d7da7"]]);export{ot as default};
