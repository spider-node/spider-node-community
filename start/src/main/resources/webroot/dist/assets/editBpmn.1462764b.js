import{i as _e,g as Q,b as Ee,c as K,d as De,e as he}from"./axios.003131ee.js";import{X as we,Z as Ce,r as p,e as Y,f as ue,g as C,o as R,v as F,w as v,i as m,l as N,u as se,$ as de,G as ee,F as J,b as me,a as A,x as pe,k as G,c as j,K as Se,a0 as Te,q as Pe,U as ke,y as xe,V as Ie,p as Ve,m as Me}from"./index.a3be559f.js";import{i as U}from"./types.22d094ed.js";import{u as Re,a as Be}from"./function.d93a1351.js";import{a as Ne}from"./sdk.dc44f240.js";import{a as $e,b as fe}from"./bpmn.14a722c0.js";import{u as ne}from"./index.6a0f63a4.js";import{S as Ue,s as Ae}from"./field.3bbe3bed.js";import"./index.a443cb70.js";const W=we("bpmn",{state:()=>({nodeId:null,selectDialogVisible:!1,editParamsDialogVisible:!1,bpmnInstance:{}}),getters:{},actions:{SetBpmnInstance(l){this.bpmnInstance=l},SetSelectDialogVisible(l){this.selectDialogVisible=l},SetNodeInfo(l){this.nodeId=Ce(l)},SetParamsDialogVisible(l){this.editParamsDialogVisible=l}}});function oe(l,c){const o=l==null?void 0:l.get("extensionElements");if(!o)return[];const e=o.get("values");return!e||!e.length?[]:c?e.filter(i=>_e(i,c)):e}function ae(l,c,o,e){const i=e.create(l,c);return o&&(i.$parent=o),i}function Le(l,c){return`<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions 
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL"
  xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI"
  xmlns:dc="http://www.omg.org/spec/DD/20100524/DC"
  xmlns:di="http://www.omg.org/spec/DD/20100524/DI"
  targetNamespace="http://bpmn.io/schema/bpmn"
  id="Definitions_0001">
  <bpmn:process id="${l}" name="${c}" isExecutable="true" />
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="${l}" />
  </bpmndi:BPMNDiagram>
</bpmn:definitions>`}async function re(l,c,o){try{const e=Date.now(),{processId:i,processName:D}=o||{},h=i||`Process_${e}`,g=D||`\u4E1A\u52A1\u6D41\u7A0B_${e}`,b=c||Le(h,g),{warnings:_}=await l.importXML(b);_&&_.length&&console.warnings(_)}catch(e){console.error(e)}}function ie(l,c,o){const e=encodeURIComponent(o);return{filename:`${c}.${l.toLowerCase()}`,href:`data:application/${l==="svg"?"text/xml":"bpmn20-xml"};charset=UTF-8,${e}`,data:o}}function ce(l,c){if(l&&c){const o=document.createElement("a");o.download=c,o.href=l,o.click(),URL.revokeObjectURL(o.href)}}const Z=W();class ve{constructor(c,o,e,i,D,h,g,b){this.create=e,this.elementFactory=i,this.translate=h,this.modeling=g,this.bpmnFactory=b,c.autoPlace!==!1&&(this.autoPlace=D.get("autoPlace",!1)),o.registerProvider(this)}getContextPadEntries(c){const{translate:o}=this;function e(){Z.SetNodeInfo(c.id),Z.SetSelectDialogVisible(!0)}function i(){Z.SetNodeInfo(c.id),Z.SetParamsDialogVisible(!0)}function D(){return{group:"edit",className:"icon-custom select-data",title:o("\u7F16\u8F91"),action:{click:e}}}function h(){return{group:"edit",className:"icon-custom edit-params",title:o("\u7F16\u8F91\u53C2\u6570\u6620\u5C04"),action:{click:i}}}return{edit:D(),edit2:h()}}}ve.$inject=["config","contextPad","create","elementFactory","injector","translate","modeling","bpmnFactory"];var Fe={__init__:["customContextPad"],customContextPad:["type",ve]},Ge={Id:"\u7F16\u53F7",Name:"\u540D\u79F0",General:"\u5E38\u89C4",Details:"\u8BE6\u60C5","Message Name":"\u6D88\u606F\u540D\u79F0",Message:"\u6D88\u606F",Initiator:"\u521B\u5EFA\u8005","Asynchronous continuations":"\u6301\u7EED\u5F02\u6B65","Asynchronous before":"\u5F02\u6B65\u524D","Asynchronous after":"\u5F02\u6B65\u540E","Job configuration":"\u5DE5\u4F5C\u914D\u7F6E",Exclusive:"\u6392\u9664","Job Priority":"\u5DE5\u4F5C\u4F18\u5148\u7EA7","Retry Time Cycle":"\u91CD\u8BD5\u65F6\u95F4\u5468\u671F",Documentation:"\u6587\u6863","Element Documentation":"\u5143\u7D20\u6587\u6863","History Configuration":"\u5386\u53F2\u914D\u7F6E","History Time To Live":"\u5386\u53F2\u7684\u751F\u5B58\u65F6\u95F4",Forms:"\u8868\u5355","Activate the global connect tool":"\u6FC0\u6D3B\u5168\u5C40\u8FDE\u63A5\u5DE5\u5177","Append {type}":"\u8FFD\u52A0 {type}","Append EndEvent":"\u8FFD\u52A0 \u7ED3\u675F\u4E8B\u4EF6 ","Append Task":"\u8FFD\u52A0 \u4EFB\u52A1","Append Gateway":"\u8FFD\u52A0 \u7F51\u5173","Append Intermediate/Boundary Event":"\u8FFD\u52A0 \u4E2D\u95F4/\u8FB9\u754C \u4E8B\u4EF6","Add Lane above":"\u5728\u4E0A\u9762\u6DFB\u52A0\u9053","Divide into two Lanes":"\u5206\u5272\u6210\u4E24\u4E2A\u9053","Divide into three Lanes":"\u5206\u5272\u6210\u4E09\u4E2A\u9053","Add Lane below":"\u5728\u4E0B\u9762\u6DFB\u52A0\u9053","Append compensation activity":"\u8FFD\u52A0\u8865\u507F\u6D3B\u52A8","Change type":"\u4FEE\u6539\u7C7B\u578B","Connect using Association":"\u4F7F\u7528\u5173\u8054\u8FDE\u63A5","Connect using Sequence/MessageFlow or Association":"\u4F7F\u7528\u987A\u5E8F/\u6D88\u606F\u6D41\u6216\u8005\u5173\u8054\u8FDE\u63A5","Connect using DataInputAssociation":"\u4F7F\u7528\u6570\u636E\u8F93\u5165\u5173\u8054\u8FDE\u63A5",Remove:"\u79FB\u9664","Activate the hand tool":"\u6FC0\u6D3B\u6293\u624B\u5DE5\u5177","Activate the lasso tool":"\u6FC0\u6D3B\u5957\u7D22\u5DE5\u5177","Activate the create/remove space tool":"\u6FC0\u6D3B\u521B\u5EFA/\u5220\u9664\u7A7A\u95F4\u5DE5\u5177","Create expanded SubProcess":"\u521B\u5EFA\u6269\u5C55\u5B50\u8FC7\u7A0B","Create IntermediateThrowEvent/BoundaryEvent":"\u521B\u5EFA\u4E2D\u95F4\u629B\u51FA\u4E8B\u4EF6/\u8FB9\u754C\u4E8B\u4EF6","Create Pool/Participant":"\u521B\u5EFA\u6C60/\u53C2\u4E0E\u8005","Parallel Multi Instance":"\u5E76\u884C\u591A\u91CD\u4E8B\u4EF6","Sequential Multi Instance":"\u65F6\u5E8F\u591A\u91CD\u4E8B\u4EF6",DataObjectReference:"\u6570\u636E\u5BF9\u8C61\u53C2\u8003",DataStoreReference:"\u6570\u636E\u5B58\u50A8\u53C2\u8003",Loop:"\u5FAA\u73AF","Ad-hoc":"\u5373\u5E2D","Create {type}":"\u521B\u5EFA {type}","Create Task":"\u521B\u5EFA\u4EFB\u52A1","Create StartEvent":"\u521B\u5EFA\u5F00\u59CB\u4E8B\u4EF6","Create EndEvent":"\u521B\u5EFA\u7ED3\u675F\u4E8B\u4EF6","Create Group":"\u521B\u5EFA\u7EC4",Task:"\u4EFB\u52A1","Send Task":"\u53D1\u9001\u4EFB\u52A1","Receive Task":"\u63A5\u6536\u4EFB\u52A1","User Task":"\u7528\u6237\u4EFB\u52A1","Manual Task":"\u624B\u5DE5\u4EFB\u52A1","Business Rule Task":"\u4E1A\u52A1\u89C4\u5219\u4EFB\u52A1","Service Task":"\u670D\u52A1\u4EFB\u52A1","Script Task":"\u811A\u672C\u4EFB\u52A1","Call Activity":"\u8C03\u7528\u6D3B\u52A8","Sub Process (collapsed)":"\u5B50\u6D41\u7A0B\uFF08\u6298\u53E0\u7684\uFF09","Sub Process (expanded)":"\u5B50\u6D41\u7A0B\uFF08\u5C55\u5F00\u7684\uFF09","Start Event":"\u5F00\u59CB\u4E8B\u4EF6",StartEvent:"\u5F00\u59CB\u4E8B\u4EF6","Intermediate Throw Event":"\u4E2D\u95F4\u4E8B\u4EF6","End Event":"\u7ED3\u675F\u4E8B\u4EF6",EndEvent:"\u7ED3\u675F\u4E8B\u4EF6","Create Gateway":"\u521B\u5EFA\u7F51\u5173",GateWay:"\u7F51\u5173","Create Intermediate/Boundary Event":"\u521B\u5EFA\u4E2D\u95F4/\u8FB9\u754C\u4E8B\u4EF6","Message Start Event":"\u6D88\u606F\u5F00\u59CB\u4E8B\u4EF6","Timer Start Event":"\u5B9A\u65F6\u5F00\u59CB\u4E8B\u4EF6","Conditional Start Event":"\u6761\u4EF6\u5F00\u59CB\u4E8B\u4EF6","Signal Start Event":"\u4FE1\u53F7\u5F00\u59CB\u4E8B\u4EF6","Error Start Event":"\u9519\u8BEF\u5F00\u59CB\u4E8B\u4EF6","Escalation Start Event":"\u5347\u7EA7\u5F00\u59CB\u4E8B\u4EF6","Compensation Start Event":"\u8865\u507F\u5F00\u59CB\u4E8B\u4EF6","Message Start Event (non-interrupting)":"\u6D88\u606F\u5F00\u59CB\u4E8B\u4EF6\uFF08\u975E\u4E2D\u65AD\uFF09","Timer Start Event (non-interrupting)":"\u5B9A\u65F6\u5F00\u59CB\u4E8B\u4EF6\uFF08\u975E\u4E2D\u65AD\uFF09","Conditional Start Event (non-interrupting)":"\u6761\u4EF6\u5F00\u59CB\u4E8B\u4EF6\uFF08\u975E\u4E2D\u65AD\uFF09","Signal Start Event (non-interrupting)":"\u4FE1\u53F7\u5F00\u59CB\u4E8B\u4EF6\uFF08\u975E\u4E2D\u65AD\uFF09","Escalation Start Event (non-interrupting)":"\u5347\u7EA7\u5F00\u59CB\u4E8B\u4EF6\uFF08\u975E\u4E2D\u65AD\uFF09","Message Intermediate Catch Event":"\u6D88\u606F\u4E2D\u95F4\u6355\u83B7\u4E8B\u4EF6","Message Intermediate Throw Event":"\u6D88\u606F\u4E2D\u95F4\u629B\u51FA\u4E8B\u4EF6","Timer Intermediate Catch Event":"\u5B9A\u65F6\u4E2D\u95F4\u6355\u83B7\u4E8B\u4EF6","Escalation Intermediate Throw Event":"\u5347\u7EA7\u4E2D\u95F4\u629B\u51FA\u4E8B\u4EF6","Conditional Intermediate Catch Event":"\u6761\u4EF6\u4E2D\u95F4\u6355\u83B7\u4E8B\u4EF6","Link Intermediate Catch Event":"\u94FE\u63A5\u4E2D\u95F4\u6355\u83B7\u4E8B\u4EF6","Link Intermediate Throw Event":"\u94FE\u63A5\u4E2D\u95F4\u629B\u51FA\u4E8B\u4EF6","Compensation Intermediate Throw Event":"\u8865\u507F\u4E2D\u95F4\u629B\u51FA\u4E8B\u4EF6","Signal Intermediate Catch Event":"\u4FE1\u53F7\u4E2D\u95F4\u6355\u83B7\u4E8B\u4EF6","Signal Intermediate Throw Event":"\u4FE1\u53F7\u4E2D\u95F4\u629B\u51FA\u4E8B\u4EF6","Message End Event":"\u6D88\u606F\u7ED3\u675F\u4E8B\u4EF6","Escalation End Event":"\u5B9A\u65F6\u7ED3\u675F\u4E8B\u4EF6","Error End Event":"\u9519\u8BEF\u7ED3\u675F\u4E8B\u4EF6","Cancel End Event":"\u53D6\u6D88\u7ED3\u675F\u4E8B\u4EF6","Compensation End Event":"\u8865\u507F\u7ED3\u675F\u4E8B\u4EF6","Signal End Event":"\u4FE1\u53F7\u7ED3\u675F\u4E8B\u4EF6","Terminate End Event":"\u7EC8\u6B62\u7ED3\u675F\u4E8B\u4EF6","Message Boundary Event":"\u6D88\u606F\u8FB9\u754C\u4E8B\u4EF6","Message Boundary Event (non-interrupting)":"\u6D88\u606F\u8FB9\u754C\u4E8B\u4EF6\uFF08\u975E\u4E2D\u65AD\uFF09","Timer Boundary Event":"\u5B9A\u65F6\u8FB9\u754C\u4E8B\u4EF6","Timer Boundary Event (non-interrupting)":"\u5B9A\u65F6\u8FB9\u754C\u4E8B\u4EF6\uFF08\u975E\u4E2D\u65AD\uFF09","Escalation Boundary Event":"\u5347\u7EA7\u8FB9\u754C\u4E8B\u4EF6","Escalation Boundary Event (non-interrupting)":"\u5347\u7EA7\u8FB9\u754C\u4E8B\u4EF6\uFF08\u975E\u4E2D\u65AD\uFF09","Conditional Boundary Event":"\u6761\u4EF6\u8FB9\u754C\u4E8B\u4EF6","Conditional Boundary Event (non-interrupting)":"\u6761\u4EF6\u8FB9\u754C\u4E8B\u4EF6\uFF08\u975E\u4E2D\u65AD\uFF09","Error Boundary Event":"\u9519\u8BEF\u8FB9\u754C\u4E8B\u4EF6","Cancel Boundary Event":"\u53D6\u6D88\u8FB9\u754C\u4E8B\u4EF6","Signal Boundary Event":"\u4FE1\u53F7\u8FB9\u754C\u4E8B\u4EF6","Signal Boundary Event (non-interrupting)":"\u4FE1\u53F7\u8FB9\u754C\u4E8B\u4EF6\uFF08\u975E\u4E2D\u65AD\uFF09","Compensation Boundary Event":"\u8865\u507F\u8FB9\u754C\u4E8B\u4EF6","Exclusive Gateway":"\u4E92\u65A5\u7F51\u5173","Parallel Gateway":"\u5E76\u884C\u7F51\u5173","Inclusive Gateway":"\u76F8\u5BB9\u7F51\u5173","Complex Gateway":"\u590D\u6742\u7F51\u5173","Event based Gateway":"\u4E8B\u4EF6\u7F51\u5173",Transaction:"\u8F6C\u8FD0","Sub Process":"\u5B50\u6D41\u7A0B","Event Sub Process":"\u4E8B\u4EF6\u5B50\u6D41\u7A0B","Collapsed Pool":"\u6298\u53E0\u6C60","Expanded Pool":"\u5C55\u5F00\u6C60","no parent for {element} in {parent}":"\u5728{parent}\u91CC\uFF0C{element}\u6CA1\u6709\u7236\u7C7B","no shape type specified":"\u6CA1\u6709\u6307\u5B9A\u7684\u5F62\u72B6\u7C7B\u578B","flow elements must be children of pools/participants":"\u6D41\u5143\u7D20\u5FC5\u987B\u662F\u6C60/\u53C2\u4E0E\u8005\u7684\u5B50\u7C7B","out of bounds release":"out of bounds release","more than {count} child lanes":"\u5B50\u9053\u5927\u4E8E{count} ","element required":"\u5143\u7D20\u4E0D\u80FD\u4E3A\u7A7A","diagram not part of bpmn:Definitions":"\u6D41\u7A0B\u56FE\u4E0D\u7B26\u5408bpmn\u89C4\u8303","no diagram to display":"\u6CA1\u6709\u53EF\u5C55\u793A\u7684\u6D41\u7A0B\u56FE","no process or collaboration to display":"\u6CA1\u6709\u53EF\u5C55\u793A\u7684\u6D41\u7A0B/\u534F\u4F5C","element {element} referenced by {referenced}#{property} not yet drawn":"\u7531{referenced}#{property}\u5F15\u7528\u7684{element}\u5143\u7D20\u4ECD\u672A\u7ED8\u5236","already rendered {element}":"{element} \u5DF2\u88AB\u6E32\u67D3","failed to import {element}":"\u5BFC\u5165{element}\u5931\u8D25",Id:"\u7F16\u53F7",Name:"\u540D\u79F0",General:"\u5E38\u89C4",Details:"\u8BE6\u60C5","Message Name":"\u6D88\u606F\u540D\u79F0",Message:"\u6D88\u606F",Initiator:"\u521B\u5EFA\u8005","Asynchronous Continuations":"\u6301\u7EED\u5F02\u6B65","Asynchronous Before":"\u5F02\u6B65\u524D","Asynchronous After":"\u5F02\u6B65\u540E","Job Configuration":"\u5DE5\u4F5C\u914D\u7F6E",Exclusive:"\u6392\u9664","Job Priority":"\u5DE5\u4F5C\u4F18\u5148\u7EA7","Retry Time Cycle":"\u91CD\u8BD5\u65F6\u95F4\u5468\u671F",Documentation:"\u6587\u6863","Element Documentation":"\u5143\u7D20\u6587\u6863","History Configuration":"\u5386\u53F2\u914D\u7F6E","History Time To Live":"\u5386\u53F2\u7684\u751F\u5B58\u65F6\u95F4",Forms:"\u8868\u5355","Form Key":"\u8868\u5355key","Form Fields":"\u8868\u5355\u5B57\u6BB5","Business Key":"\u4E1A\u52A1key","Form Field":"\u8868\u5355\u5B57\u6BB5",ID:"\u7F16\u53F7",Type:"\u7C7B\u578B",Label:"\u540D\u79F0","Default Value":"\u9ED8\u8BA4\u503C",Validation:"\u6821\u9A8C","Add Constraint":"\u6DFB\u52A0\u7EA6\u675F",Config:"\u914D\u7F6E",Properties:"\u5C5E\u6027","Add Property":"\u6DFB\u52A0\u5C5E\u6027",Value:"\u503C",Add:"\u6DFB\u52A0",Values:"\u503C","Add Value":"\u6DFB\u52A0\u503C",Listeners:"\u76D1\u542C\u5668","Execution Listener":"\u6267\u884C\u76D1\u542C","Event Type":"\u4E8B\u4EF6\u7C7B\u578B","Listener Type":"\u76D1\u542C\u5668\u7C7B\u578B","Java Class":"Java\u7C7B",Expression:"\u8868\u8FBE\u5F0F","Must provide a value":"\u5FC5\u987B\u63D0\u4F9B\u4E00\u4E2A\u503C","Delegate Expression":"\u4EE3\u7406\u8868\u8FBE\u5F0F",Script:"\u811A\u672C","Script Format":"\u811A\u672C\u683C\u5F0F","Script Type":"\u811A\u672C\u7C7B\u578B","Inline Script":"\u5185\u8054\u811A\u672C","External Script":"\u5916\u90E8\u811A\u672C",Resource:"\u8D44\u6E90","Field Injection":"\u5B57\u6BB5\u6CE8\u5165",Extensions:"\u6269\u5C55","Input/Output":"\u8F93\u5165/\u8F93\u51FA","Input Parameters":"\u8F93\u5165\u53C2\u6570","Output Parameters":"\u8F93\u51FA\u53C2\u6570",Parameters:"\u53C2\u6570","Output Parameter":"\u8F93\u51FA\u53C2\u6570","Timer Definition Type":"\u5B9A\u65F6\u5668\u5B9A\u4E49\u7C7B\u578B","Timer Definition":"\u5B9A\u65F6\u5668\u5B9A\u4E49",Date:"\u65E5\u671F",Duration:"\u6301\u7EED",Cycle:"\u5FAA\u73AF",Signal:"\u4FE1\u53F7","Signal Name":"\u4FE1\u53F7\u540D\u79F0",Escalation:"\u5347\u7EA7",Error:"\u9519\u8BEF","Link Name":"\u94FE\u63A5\u540D\u79F0",Condition:"\u6761\u4EF6\u540D\u79F0","Variable Name":"\u53D8\u91CF\u540D\u79F0","Variable Event":"\u53D8\u91CF\u4E8B\u4EF6","Specify more than one variable change event as a comma separated list.":"\u591A\u4E2A\u53D8\u91CF\u4E8B\u4EF6\u4EE5\u9017\u53F7\u9694\u5F00","Wait for Completion":"\u7B49\u5F85\u5B8C\u6210","Activity Ref":"\u6D3B\u52A8\u53C2\u8003","Version Tag":"\u7248\u672C\u6807\u7B7E",Executable:"\u53EF\u6267\u884C\u6587\u4EF6","External Task Configuration":"\u6269\u5C55\u4EFB\u52A1\u914D\u7F6E","Task Priority":"\u4EFB\u52A1\u4F18\u5148\u7EA7",External:"\u5916\u90E8",Connector:"\u8FDE\u63A5\u5668","Must configure Connector":"\u5FC5\u987B\u914D\u7F6E\u8FDE\u63A5\u5668","Connector Id":"\u8FDE\u63A5\u5668\u7F16\u53F7",Implementation:"\u5B9E\u73B0\u65B9\u5F0F","Field Injections":"\u5B57\u6BB5\u6CE8\u5165",Fields:"\u5B57\u6BB5","Result Variable":"\u7ED3\u679C\u53D8\u91CF",Topic:"\u4E3B\u9898","Configure Connector":"\u914D\u7F6E\u8FDE\u63A5\u5668","Input Parameter":"\u8F93\u5165\u53C2\u6570",Assignee:"\u4EE3\u7406\u4EBA","Candidate Users":"\u5019\u9009\u7528\u6237","Candidate Groups":"\u5019\u9009\u7EC4","Due Date":"\u5230\u671F\u65F6\u95F4","Follow Up Date":"\u8DDF\u8E2A\u65E5\u671F",Priority:"\u4F18\u5148\u7EA7","The follow up date as an EL expression (e.g. ${someDate} or an ISO date (e.g. 2015-06-26T09:54:00)":"\u8DDF\u8E2A\u65E5\u671F\u5FC5\u987B\u7B26\u5408EL\u8868\u8FBE\u5F0F\uFF0C\u5982\uFF1A ${someDate} ,\u6216\u8005\u4E00\u4E2AISO\u6807\u51C6\u65E5\u671F\uFF0C\u5982\uFF1A2015-06-26T09:54:00","The due date as an EL expression (e.g. ${someDate} or an ISO date (e.g. 2015-06-26T09:54:00)":"\u8DDF\u8E2A\u65E5\u671F\u5FC5\u987B\u7B26\u5408EL\u8868\u8FBE\u5F0F\uFF0C\u5982\uFF1A ${someDate} ,\u6216\u8005\u4E00\u4E2AISO\u6807\u51C6\u65E5\u671F\uFF0C\u5982\uFF1A2015-06-26T09:54:00",Variables:"\u53D8\u91CF","Candidate Starter Configuration":"\u5019\u9009\u5F00\u59CB\u914D\u7F6E","Task Listener":"\u4EFB\u52A1\u76D1\u542C\u5668","Candidate Starter Groups":"\u5019\u9009\u5F00\u59CB\u7EC4","Candidate Starter Users":"\u5019\u9009\u5F00\u59CB\u7528\u6237","Tasklist Configuration":"\u4EFB\u52A1\u5217\u8868\u914D\u7F6E",Startable:"\u542F\u52A8","Specify more than one group as a comma separated list.":"\u6307\u5B9A\u591A\u4E2A\u7EC4,\u7528\u9017\u53F7\u5206\u9694","Specify more than one user as a comma separated list.":"\u6307\u5B9A\u591A\u4E2A\u7528\u6237,\u7528\u9017\u53F7\u5206\u9694","This maps to the process definition key.":"\u8FD9\u4F1A\u6620\u5C04\u4E3A\u6D41\u7A0B\u5B9A\u4E49\u7684\u952E","CallActivity Type":"\u8C03\u7528\u6D3B\u52A8\u7C7B\u578B","Condition Type":"\u6761\u4EF6\u7C7B\u578B","Create UserTask":"\u521B\u5EFA\u7528\u6237\u4EFB\u52A1","Create CallActivity":"\u521B\u5EFA\u8C03\u7528\u6D3B\u52A8","Called Element":"\u8C03\u7528\u5143\u7D20","Create DataObjectReference":"\u521B\u5EFA\u6570\u636E\u5BF9\u8C61\u5F15\u7528","Create DataStoreReference":"\u521B\u5EFA\u6570\u636E\u5B58\u50A8\u5F15\u7528","Multi Instance":"\u591A\u5B9E\u4F8B","Loop Cardinality":"\u5B9E\u4F8B\u6570\u91CF",Collection:"\u4EFB\u52A1\u53C2\u4E0E\u4EBA\u5217\u8868","Element Variable":"\u5143\u7D20\u53D8\u91CF","Completion Condition":"\u5B8C\u6210\u6761\u4EF6"};const q=(l={})=>({prop:"order",label:"\u5E8F\u53F7",type:"index",width:60,...l}),z=(l={})=>({prop:"action",label:"\u64CD\u4F5C",width:"180px",fixed:"right",...l}),B=(l,c,o={})=>typeof l=="string"?{prop:l,label:c,...o}:typeof l=="object"?l:{};var Oe={__name:"selectDialog",emits:["success"],setup(l,{expose:c,emit:o}){const e=p({background:!0,page:1,size:10,layout:"prev, pager, next",total:0}),i=p({status:Ue.OPEN}),D=p([ne("areaName","\u9886\u57DF\u540D\u79F0"),ne("name","\u57DF\u529F\u80FD\u540D\u79F0")]),h=p([q(),B("name","\u57DF\u529F\u80FD\u540D\u79F0"),B("taskComponent","\u8282\u70B9\u7EC4\u4EF6"),B("taskService","\u8282\u70B9\u670D\u52A1"),B("serviceTaskType","\u8282\u70B9\u7C7B\u578B",{render:({row:s})=>Ae[s.serviceTaskType]}),ne("areaName","\u9886\u57DF\u540D\u79F0"),z()]),g=async({searchData:s})=>{const{nodes:d}=await $e({page:1,size:100,...s});return{records:d,total:100}},b=W(),_=Y(()=>b.selectDialogVisible),T=async s=>{b.SetSelectDialogVisible(!1),ee({message:"\u606D\u559C\u4F60\uFF0C\u64CD\u4F5C\u6210\u529F",type:"success"}),o("success",s)},n=()=>{b.SetSelectDialogVisible(!1)};return c({}),ue(()=>{b.SetSelectDialogVisible(!1)}),(s,d)=>{const w=C("el-button"),V=C("yun-pro-table"),a=C("yun-drawer");return R(),F(a,{modelValue:se(_),"onUpdate:modelValue":d[2]||(d[2]=f=>de(_)?_.value=f:null),size:"large",title:"\u9009\u62E9\u57DF\u529F\u80FD","show-confirm-button":!1,"cancel-button-text":"\u5173\u95ED",onConfirm:T,onClosed:n},{default:v(()=>[m(V,{ref:"proTableRef",searchData:i.value,"onUpdate:searchData":d[0]||(d[0]=f=>i.value=f),pagination:e.value,"onUpdate:pagination":d[1]||(d[1]=f=>e.value=f),"search-fields":D.value,"table-columns":h.value,"remote-method":g},{t_action:v(({row:f})=>[m(w,{type:"action",onClick:P=>T(f)},{default:v(()=>[N(" \u9009\u62E9 ")]),_:2},1032,["onClick"])]),_:1},8,["searchData","pagination","search-fields","table-columns"])]),_:1},8,["modelValue"])}}},Xe={__name:"saveDialog",emits:["success"],setup(l,{expose:c,emit:o}){const e=p(!1),i=p({startEventId:void 0}),D=p([{label:"\u8D77\u59CBid",prop:"startEventId"},{label:"bpmn\u7684Url",prop:"bpmnUrl",type:"input",render:()=>m(J,null,[m(C("el-row"),{align:"middle",justify:"space-between"},{default:()=>[!U(i.value.bpmnUrl)&&m("div",{class:"sdk-url-text "},[m(C("yun-ellipsis"),{text:i.value.bpmnUrl,"visible-line":2},null)])]})])},{label:"bpmn\u540D\u79F0",prop:"bpmnName",type:"input"}]),h=_=>{e.value=!0,i.value=_},g=async _=>{await Re(i.value),ee({message:"\u606D\u559C\u4F60\uFF0C\u64CD\u4F5C\u6210\u529F",type:"success"}),e.value=!1,o("success",_)},b=()=>{i.value={},e.value=!1};return ue(()=>{e.value=!1}),c({show:h}),(_,T)=>{const n=C("yun-pro-form"),s=C("yun-drawer");return R(),F(s,{modelValue:e.value,"onUpdate:modelValue":T[0]||(T[0]=d=>e.value=d),size:"large",title:"\u63D0\u4EA4\u4FDD\u5B58",onConfirm:g,onClosed:b},{default:v(()=>[m(n,{ref:"formRef",form:i.value,columns:D.value,"form-props":{labelWidth:135},config:{colProps:{span:24}}},null,8,["form","columns"])]),_:1},8,["modelValue"])}}};const je=["onClick"],We={__name:"selectSpecificParamsDrawer",emits:"done",setup(l,{expose:c,emit:o}){const e=W(),i=Y(()=>e.bpmnInstance),D=p([q(),B("targetName","targetName"),z({width:120})]),h=p({}),g=p([]),b=p(!1);function _(){b.value=!1,g.value=[]}function T(d){o("done",{scope:h.value,row:d}),_()}async function n(){var I,S,M;const w=i.value.get("elementRegistry").getAll()[0].children.find(({id:t})=>t===e.nodeId),V=Q(w),a=oe(V)[0],f=(I=a.values.find(({name:t})=>t==="task-component"))==null?void 0:I.value,P=(S=a.values.find(({name:t})=>t==="task-service"))==null?void 0:S.value,L=await fe({taskComponent:f,taskService:P}),{nodes:O}=L,{paramMapping:k}=O[0]||{},E=((M=k==null?void 0:k.map)==null?void 0:M.nodeParamConfigs)||[];return{records:E,total:E.length}}function s(d){h.value=d,b.value=!0}return c({show:s}),(d,w)=>{const V=C("el-button"),a=C("yun-pro-table"),f=C("yun-drawer");return R(),F(f,{modelValue:b.value,"onUpdate:modelValue":w[1]||(w[1]=P=>b.value=P),size:"large",title:"\u6807\u9898","show-confirm-button":!1,"cancel-button-text":"\u5173 \u95ED",onClosed:_},{default:v(()=>[b.value?(R(),F(a,{key:0,ref:"proTableRef",tableData:g.value,"onUpdate:tableData":w[0]||(w[0]=P=>g.value=P),"table-columns":D.value,"remote-method":n,"default-fetch":!0},{t_action:v(({row:P})=>[m(V,{type:"action",onClick:L=>T(P)},{default:v(()=>[N(" \u9009\u62E9 ")]),_:2},1032,["onClick"])]),t_targetName:v(({row:P})=>[A("span",{class:"targetName",onClick:L=>T(P)},pe(P.targetName),9,je)]),_:1},8,["tableData","table-columns"])):G("v-if",!0)]),_:1},8,["modelValue"])}}};var le=me(We,[["__scopeId","data-v-74c03920"]]);const Je={class:"flex justify-between"},qe={__name:"fieldMappingTable",setup(l,{expose:c}){const o=["task-component","task-service","service_task_type","delay_time"],e=p([]),i=p(),D=p([q(),B("name","name"),B("value","value"),z()]);function h(){e.value.push({})}function g({scope:n,row:s}){n.row.name=s.targetName}function b(n,s){const{$index:d}=s;this.list.splice(d,1)}function _(n){e.value=n}function T(){return e.value.filter(({name:n,value:s})=>!U(n)||!U(s))}return c({setTableData:_,getTableData:T}),(n,s)=>{const d=C("el-button"),w=C("el-input"),V=C("yun-pro-table");return R(),j(J,null,[m(V,{ref:"proTableRef",tableData:e.value,"onUpdate:tableData":s[0]||(s[0]=a=>e.value=a),"table-columns":D.value},{tableHeaderLeft:v(()=>[m(d,{type:"primary",onClick:h},{default:v(()=>[N(" \u65B0\u589E ")]),_:1})]),t_action:v(({row:a,...f})=>[o.includes(a.name)?G("v-if",!0):(R(),F(d,{key:0,type:"action",onClick:P=>b(a,f)},{default:v(()=>[N(" \u5220\u9664 ")]),_:2},1032,["onClick"]))]),t_name:v(a=>[A("div",Je,[m(w,{modelValue:a.row.name,"onUpdate:modelValue":f=>a.row.name=f,modelModifiers:{trim:!0},style:{width:"90%"},disabled:o.includes(a.row.name)},null,8,["modelValue","onUpdate:modelValue","disabled"]),G(` <el-button type="primary" @click="handleSelect(scope)">
          \u9009\u62E9
        </el-button> `)])]),t_value:v(a=>[m(w,{modelValue:a.row.value,"onUpdate:modelValue":f=>a.row.value=f,modelModifiers:{trim:!0},style:{width:"90%"},disabled:o.includes(a.row.name)},null,8,["modelValue","onUpdate:modelValue","disabled"])]),_:1},8,["tableData","table-columns"]),m(le,{ref_key:"selectSpecificParamsDrawerRef",ref:i,onDone:g},null,512)],64)}}},ze={__name:"appointParamTable",setup(l,{expose:c}){const o=["task-component","task-service","service_task_type","delay_time"],e=p([]),i=p(),D=p([q(),B("name","name"),B("value","value"),z()]);function h(){e.value.push({})}function g({scope:n,row:s}){n.row.value=s.value}function b(n,s){const{$index:d}=s;this.list.splice(d,1)}function _(n){e.value=n}function T(){return e.value.filter(({name:n,value:s})=>!U(n)||!U(s))}return c({setTableData:_,getTableData:T}),(n,s)=>{const d=C("el-button"),w=C("el-input"),V=C("yun-pro-table");return R(),j(J,null,[m(V,{ref:"proTableRef",tableData:e.value,"onUpdate:tableData":s[0]||(s[0]=a=>e.value=a),"table-columns":D.value},{tableHeaderLeft:v(()=>[m(d,{type:"primary",onClick:h},{default:v(()=>[N(" \u65B0\u589E ")]),_:1})]),t_action:v(({row:a,...f})=>[o.includes(a.name)?G("v-if",!0):(R(),F(d,{key:0,type:"action",onClick:P=>b(a,f)},{default:v(()=>[N(" \u5220\u9664 ")]),_:2},1032,["onClick"]))]),t_name:v(({row:a})=>[m(w,{modelValue:a.name,"onUpdate:modelValue":f=>a.name=f,modelModifiers:{trim:!0},style:{width:"90%"},disabled:o.includes(a.name)},null,8,["modelValue","onUpdate:modelValue","disabled"])]),t_value:v(a=>[m(w,{modelValue:a.row.value,"onUpdate:modelValue":f=>a.row.value=f,modelModifiers:{trim:!0},style:{width:"90%"},disabled:o.includes(a.row.name)},null,8,["modelValue","onUpdate:modelValue","disabled"])]),_:1},8,["tableData","table-columns"]),m(le,{ref_key:"selectSpecificParamsDrawerRef",ref:i,onDone:g},null,512)],64)}}},He={__name:"conversionParamTable",setup(l,{expose:c}){const o=["task-component","task-service","service_task_type","delay_time"],e=p([]),i=p(),D=p([q(),B("name","name"),B("value","value"),z()]);function h(){e.value.push({})}function g({scope:n,row:s}){n.row.value=s.value}function b(n,s){const{$index:d}=s;this.list.splice(d,1)}function _(n){e.value=n}function T(){return e.value.filter(({name:n,value:s})=>!U(n)||!U(s))}return c({setTableData:_,getTableData:T}),(n,s)=>{const d=C("el-button"),w=C("el-input"),V=C("yun-pro-table");return R(),j(J,null,[m(V,{ref:"proTableRef",tableData:e.value,"onUpdate:tableData":s[0]||(s[0]=a=>e.value=a),"table-columns":D.value},{tableHeaderLeft:v(()=>[m(d,{type:"primary",onClick:h},{default:v(()=>[N(" \u65B0\u589E ")]),_:1})]),t_action:v(({row:a,...f})=>[o.includes(a.name)?G("v-if",!0):(R(),F(d,{key:0,type:"action",onClick:P=>b(a,f)},{default:v(()=>[N(" \u5220\u9664 ")]),_:2},1032,["onClick"]))]),t_name:v(({row:a})=>[m(w,{modelValue:a.name,"onUpdate:modelValue":f=>a.name=f,modelModifiers:{trim:!0},style:{width:"90%"},disabled:o.includes(a.name)},null,8,["modelValue","onUpdate:modelValue","disabled"])]),t_value:v(a=>[m(w,{modelValue:a.row.value,"onUpdate:modelValue":f=>a.row.value=f,modelModifiers:{trim:!0},style:{width:"90%"},disabled:o.includes(a.row.name)},null,8,["modelValue","onUpdate:modelValue","disabled"])]),_:1},8,["tableData","table-columns"]),m(le,{ref_key:"selectSpecificParamsDrawerRef",ref:i,onDone:g},null,512)],64)}}},Ke={__name:"selectParamsDrawer",emits:"done",setup(l,{expose:c,emit:o}){const e=p("field_mapping"),i=W(),D=Y(()=>i.editParamsDialogVisible),h=Y(()=>i.bpmnInstance),g=p([]),b=p(),_=p(),T=p(),n=p([]),s=p([]),d=p([]);function w(k="field_mapping"){var I;let E=(I=g.value.find(({name:S})=>S===k))==null?void 0:I.value;if(U(E))return[];try{E=JSON.parse(E)}catch{E={},ee.warning(`${k} \u53C2\u6570\u89E3\u6790\u5931\u8D25`)}return Reflect.ownKeys(E).map(S=>({name:S,value:E[S]}))}async function V(){var u,y;const E=h.value.get("elementRegistry").getAll()[0].children.find(({id:x})=>x===i.nodeId),I=Q(E),S=oe(I)[0],M=(u=S.values.find(({name:x})=>x==="task-component"))==null?void 0:u.value,t=(y=S.values.find(({name:x})=>x==="task-service"))==null?void 0:y.value,r=await fe({taskComponent:M,taskService:t});return(r==null?void 0:r.nodeParamConfigs[0])||[]}async function a(){const E=h.value.get("elementRegistry").getAll()[0].children.find(({id:u})=>u===i.nodeId),I=Q(E),S=oe(I)[0];g.value=(S==null?void 0:S.values)||[];const M=w("field_mapping"),r=(await V()).filter(({targetName:u})=>M.every(({name:y})=>y!==u)).map(({targetName:u})=>({name:u,value:""}));n.value=[...M,...r],s.value=w("appoint_param"),d.value=w("conversion_param"),Te(()=>{b.value.setTableData(n.value),_.value.setTableData(s.value),T.value.setTableData(d.value)})}function f(){i.SetParamsDialogVisible(!1)}function P(k,E){const I=g.value.find(({name:M})=>M===k);if(E.length===0)return g.value;const S=E.reduce((M,t)=>({...M,[t.name]:t.value}),{});return U(I)?[...g.value,{name:k,value:JSON.stringify(S)}]:(I.value=JSON.stringify(S),g.value)}async function L(k,E){E.value=!0,g.value=P("field_mapping",b.value.getTableData()),g.value=P("appoint_param",_.value.getTableData()),g.value=P("conversion_param",T.value.getTableData());try{o("done",g.value),k(),f()}finally{E.value=!1}}function O(){const k=a();console.log("output->bb",k)}return Se(()=>D.value,k=>{k&&O()}),c({show:O}),(k,E)=>{const I=C("el-tab-pane"),S=C("el-tabs"),M=C("yun-drawer");return R(),F(M,{modelValue:se(D),"onUpdate:modelValue":E[1]||(E[1]=t=>de(D)?D.value=t:null),size:"X-large",title:"\u7F16\u8F91\u53C2\u6570\u6620\u5C04","confirm-button-text":"\u786E\u8BA4","cancel-button-text":"\u53D6\u6D88",onConfirm:L,onClosed:f},{default:v(()=>[m(S,{modelValue:e.value,"onUpdate:modelValue":E[0]||(E[0]=t=>e.value=t),class:"login-form-type"},{default:v(()=>[m(I,{label:"\u53C2\u6570\u6620\u5C04",name:"field_mapping"},{default:v(()=>[m(qe,{ref_key:"fieldMappingTableRef",ref:b},null,512)]),_:1}),m(I,{label:"\u9884\u5236\u53C2\u6570",name:"appoint_param"},{default:v(()=>[m(ze,{ref_key:"appointParamTableRef",ref:_},null,512)]),_:1}),m(I,{label:"\u53C2\u6570\u8F6C\u6362",name:"conversion_param"},{default:v(()=>[m(He,{ref_key:"conversionParamTableRef",ref:T},null,512)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])}}};const Ze=l=>(Ve("data-v-11ce87e4"),l=l(),Me(),l),Qe={class:"actions"},Ye={class:"flex flex-row"},et={class:"container"},tt={class:"modeler"},nt=Ze(()=>A("div",{id:"bpmn-canvas"},null,-1)),at={key:0,id:"properties"},ot={__name:"editBpmn",setup(l){const c={VIEW:"VIEW",EDIT:"EDIT"},o=p(),e=p(!1),i=p(!1),D=Pe(),h=c.EDIT,{id:g}=D.query,b=p(),_=p(),T=p();let n=null;const s=p({bpmnUrl:void 0,bpmnName:void 0}),d=(t,r)=>(r=r||{},t=Ge[t]||t,t.replace(/{([^}]+)}/g,(u,y)=>r[y]||`{${y}}`)),w=()=>{const t=n.get("eventBus");["element.click","element.changed"].forEach(u=>{t.on(u,y=>{!y||y.element.type==="bpmn:Process"||console.log(y)})})},V=()=>{w()},a=()=>{console.log("\u521B\u5EFA\u6210\u529F!"),V()},f=async t=>{await n.importXML(t,r=>{r?console.error(r):a()})},P=async()=>await he({method:"get",timeout:12e4,url:s.value.bpmnUrl,headers:{"Content-Type":"multipart/form-data"}}),L=(t={taskComponent:"1",taskService:"2",serviceTaskType:"3"})=>{const r=n.get("elementRegistry"),u=n.get("modeling"),y=n.get("moddle"),x=W(),$=r.get(x.nodeId),X=Q($),H=ae("bpmn:ExtensionElements",{values:[]},X,y),te=ae("camunda:Properties",{values:[]},H,y),ge=[{name:"task-component",valueKey:"taskComponent"},{name:"task-service",valueKey:"taskService"},{name:"service-task-type",valueKey:"serviceTaskType"}].map(({name:be,valueKey:ye})=>ae("camunda:Property",{name:be,value:t[ye]},te,y));u.updateModdleProperties($,te,{values:ge}),u.updateModdleProperties($,H,{values:[te]}),u.updateModdleProperties($,X,{extensionElements:H})},O=async()=>{const{versions:t}=await Be({page:1,size:1,versionId:g});return console.log("output->getFormDataById",t),{...t[0]||{}}};ke(async()=>{n=new Ee({container:"#bpmn-canvas",propertiesPanel:{parent:"#properties"},additionalModules:[K.exports.BpmnPropertiesPanelModule,K.exports.BpmnPropertiesProviderModule,K.exports.CamundaPlatformPropertiesProviderModule,K.exports.CloudElementTemplatesPropertiesProviderModule,{translate:["value",d]},Fe],moddleExtensions:{camunda:De}});const t=W();t.SetBpmnInstance(n),t.SetParamsDialogVisible(!1),t.SetSelectDialogVisible(!1),e.value=!0;try{const r=await O();if(s.value={...s.value,...r},U(s.value.bpmnUrl))re(n);else{const{data:u}=await P();f(u)}}catch(r){re(n),ee.error(r)}finally{e.value=!1}});async function k(t="bpmn"){try{if(!n)return this.$message.error("\u6D41\u7A0B\u56FE\u5F15\u64CE\u521D\u59CB\u5316\u5931\u8D25");const r=n;if(t==="xml"||t==="bpmn"){const{err:u,xml:y}=await r.saveXML();u&&console.error(`[Process Designer Warn ]: ${u.message||u}`);const x=new Blob([y],{type:"bpmn20-xml"}),$=new File([x],`${new Date().getTime()}.bpmn`,{type:x.type}),X=new FormData;return X.append("file",$),X.append("fileExtension","bpmn"),i.value=!0,(await Ne(X)).patch}}catch(r){console.error(`[Process Designer Warn ]: ${r.message||r}`)}finally{i.value=!1}}async function E(t="bpmn"){try{if(!n)return this.$message.error("\u6D41\u7A0B\u56FE\u5F15\u64CE\u521D\u59CB\u5316\u5931\u8D25");const r=n;if(t==="xml"||t==="bpmn"){const{err:u,xml:y}=await r.saveXML();u&&console.error(`[Process Designer Warn ]: ${u.message||u}`);const{href:x,filename:$}=ie(t.toUpperCase(),new Date().getTime(),y);ce(x,$)}else{const{err:u,svg:y}=await r.saveSVG();if(u)return console.error(u);const{href:x,filename:$}=ie("SVG",new Date().getTime(),y);ce(x,$)}}catch(r){console.error(`[Process Designer Warn ]: ${r.message||r}`)}}const I=async()=>{var y;const r=(y=n.get("elementRegistry").getAll().find(x=>x.type==="bpmn:StartEvent"))==null?void 0:y.id,u=await k();T.value.show({...s.value,startEventId:r,bpmnUrl:u})},S=()=>{var t;(t=o.value)==null||t.click()},M=()=>{try{if(!n)return this.$message.error("\u6D41\u7A0B\u56FE\u5F15\u64CE\u521D\u59CB\u5316\u5931\u8D25");const t=n;if(o.value&&o.value.files){const r=o.value.files[0],u=new FileReader;u.readAsText(r),u.onload=function(){const y=this.result;t.importXML(y)}}}catch(t){console.error(`[Process Designer Warn ]: ${t.message||t}`)}};return(t,r)=>{const u=C("el-button"),y=Ie("loading");return R(),j(J,null,[A("div",Qe,[A("div",null," name: "+pe(s.value.functionName),1),A("div",Ye,[m(u,{onClick:r[0]||(r[0]=x=>S())},{default:v(()=>[N(" \u52A0\u8F7D\u672C\u5730 bpmn ")]),_:1}),A("input",{ref_key:"importRef",ref:o,type:"file",style:{display:"none"},accept:".xml,.bpmn",onChange:M},null,544),m(u,{onClick:r[1]||(r[1]=x=>E())},{default:v(()=>[N(" \u4E0B\u8F7D bpmn \u81F3\u672C\u5730 ")]),_:1}),A("div",null,[m(u,{loading:i.value,onClick:r[2]||(r[2]=x=>I())},{default:v(()=>[N(" \u63D0\u4EA4\u4FDD\u5B58 ")]),_:1},8,["loading"])])])]),xe((R(),j("div",et,[A("div",tt,[nt,se(h)===c.EDIT?(R(),j("div",at)):G("v-if",!0),G(" \u4FA7\u8FB9\u680F\u533A\u57DF ")])])),[[y,e.value]]),m(Oe,{ref_key:"selectDialogRef",ref:b,onSuccess:L},null,512),m(Ke,{ref_key:"selectParamsDrawerRef",ref:_,onDone:t.handleUpdateElementParams},null,8,["onDone"]),m(Xe,{ref_key:"saveDialogRef",ref:T,onSuccess:L},null,512)],64)}}};var vt=me(ot,[["__scopeId","data-v-11ce87e4"]]);export{vt as default};
