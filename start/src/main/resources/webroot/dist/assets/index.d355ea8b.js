import{r as m,W as D,X as Y,Z as Q,e as $,i as P,g as S,o as F,v as U,w as N,u as k,k as G,c as J,F as X,l as W,b as Z}from"./index.f9827e98.js";import{u as I}from"./index.6a0f63a4.js";import{h as V}from"./index.d9ff93cd.js";var K=Object.defineProperty,ee=Object.defineProperties,te=Object.getOwnPropertyDescriptors,q=Object.getOwnPropertySymbols,oe=Object.prototype.hasOwnProperty,ne=Object.prototype.propertyIsEnumerable,z=(r,e,o)=>e in r?K(r,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[e]=o,b=(r,e)=>{for(var o in e||(e={}))oe.call(e,o)&&z(r,o,e[o]);if(q)for(var o of q(e))ne.call(e,o)&&z(r,o,e[o]);return r},re=(r,e)=>ee(r,te(e));function ae(r){for(const e in r){const o=r[e];(o===""||Array.isArray(o)&&o.length===0)&&delete r[e]}}function ie(r){for(const e in r)for(const o in r[e])(o.includes("time")||o.includes("Time"))&&r[e][o]&&!r[e][o].toString().includes(":")&&(r[e][o]=Y(r[e][o]).format("YYYY-MM-DD HH:mm:ss"))}function C(r){return D(r)?r:m(r)}const H={SEARCH_PLUS:"SEARCH_PLUS"};function se(r,e){var o,u,d;try{if(!r||!((o=r==null?void 0:r.list)!=null&&o.includes(H.SEARCH_PLUS)))return;if(r.list.includes(H.SEARCH_PLUS)){const p=(u=r==null?void 0:r.config)==null?void 0:u.columns,g=((d=r==null?void 0:r.config)==null?void 0:d.searchFields)||[];for(const t in e){const n=p.find(a=>(a==null?void 0:a.prop)===t&&((a==null?void 0:a.filterAlias)||(a==null?void 0:a.fieldMapToTime))),i=g.find(a=>(a==null?void 0:a.prop)===t&&((a==null?void 0:a.filterAlias)||(a==null?void 0:a.fieldMapToTime)));n&&(n.filterAlias&&(e[n.filterAlias]=e[t]),n.fieldMapToTime&&e[n.prop]&&Array.isArray(e[n.prop])&&(e[n.fieldMapToTime[0]]=e[t][0],e[n.fieldMapToTime[1]]=e[t][1]),delete e[t]),i&&(i.filterAlias&&(e[i.filterAlias]=e[t]),i.fieldMapToTime&&e[i.prop]&&Array.isArray(e[i.prop])&&(e[i.fieldMapToTime[0]]=e[t][0],e[i.fieldMapToTime[1]]=e[t][1]),delete e[t])}}}catch(p){console.log(p)}}function le(r,e){var o;const u=(o=r==null?void 0:r.config)==null?void 0:o.columns;try{if(u){for(const d in u)if(u[d].prop&&u[d].prop.includes("."))for(const p in e)e[p][u[d].prop]=Q.exports.get(e[p],u[d].prop)}}catch(d){console.log(d)}}function ue(r){const{apiFn:e,extParams:o={},extQuerys:u={},isClearReqEmptyField:d=!0,paramsHandler:p,querysHandler:g,responseHandler:t,optimize:n,plugins:i}=r,a=m([]),y=C(e),s=C(o),l=C(u),c=m(null),w=m({background:!0,page:1,pageSize:10,sort:"",layout:"total, sizes, prev, pager, next, jumper",pageSizes:[10,30,50,100],total:0}),h=m({}),M=m({});async function L({searchData:f,filterData:_,pagination:v}){n&&(a.value=[]);const E=v.sort||l.value.sort;let T=re(b(b({},{size:v.size||v.pageSize,page:v.page}),l.value),{sort:E}),x=b(b(b({},f),_),s.value);se(i,x),d&&ae(x);try{x=p?await p(x):x}catch(B){console.log(B)}T=g?g(T):T,M.value={params:x,querys:T};const R=await y.value(x,T);w.value.total=R.total;const A=R.records||R;return le(i,A),ie(A),t?t(A):A}function O(f){var _;f&&(s.value=b(b({},s.value),f)),(_=c==null?void 0:c.value)==null||_.getData()}function j({column:f,prop:_,order:v}){if(_&&v){const E={descending:"DESC",ascending:"ASC"};w.value.sort=`${f.sortAlias||f.property}__${E[f.order]}`}else w.value.sort="";O()}return{tableData:a,proTableRef:c,reLoad:O,pagination:w,remoteMethod:L,tableProps:{transformation:f=>f===void 0||f===""||f===null?"--":f,showTableSetting:!0,onSortChange:({column:f,prop:_,order:v})=>j({column:f,prop:_,order:v}),yunPagination:!0},filterTableData:h,finalPostResult:M}}const de=()=>{const r=navigator.userAgent.toLowerCase(),e=t=>t.test(r),o=t=>r.match(t).toString().replace(/[^0-9|_.]/g,"").replace(/_/g,"."),u=()=>{let t="unknow";e(/windows|win32|win64|wow32|wow64/g)?t="windows":e(/macintosh|macintel/g)?t="macos":e(/x11/g)?t="linux":e(/android|adr/g)?t="android":e(/ios|iphone|ipad|ipod|iwatch/g)&&(t="ios");let n="unknow";return t==="windows"?e(/windows nt 5.0|windows 2000/g)?n="2000":e(/windows nt 5.1|windows xp/g)?n="xp":e(/windows nt 5.2|windows 2003/g)?n="2003":e(/windows nt 6.0|windows vista/g)?n="vista":e(/windows nt 6.1|windows 7/g)?n="7":e(/windows nt 6.2|windows 8/g)?n="8":e(/windows nt 6.3|windows 8.1/g)?n="8.1":e(/windows nt 10.0|windows 10/g)&&(n="10"):t==="macos"?n=o(/os x [\d._]+/g):t==="android"?n=o(/android [\d._]+/g):t==="ios"&&(n=o(/os [\d._]+/g)),{name:t,version:n}},d=t=>{let n="unknow";return t.name==="windows"||t.name==="macos"||t.name==="linux"?n="desktop":(t.name==="android"||t.name==="ios"||e(/mobile/g))&&(n="mobile"),n},p=()=>{let t="unknow",n="unknow";e(/applewebkit/g)?(t="webkit",e(/edge/g)?n="edge":e(/opr/g)?n="opera":e(/chrome/g)?n="chrome":e(/safari/g)&&(n="safari")):e(/gecko/g)&&e(/firefox/g)?(t="gecko",n="firefox"):e(/presto/g)?(t="presto",n="opera"):e(/trident|compatible|msie/g)&&(t="trident",n="iexplore");let i="unknow";t==="webkit"?i=o(/applewebkit\/[\d._]+/g):t==="gecko"?i=o(/gecko\/[\d._]+/g):t==="presto"?i=o(/presto\/[\d._]+/g):t==="trident"&&(i=o(/trident\/[\d._]+/g));let a="unknow";return n==="chrome"?a=o(/chrome\/[\d._]+/g):n==="safari"?a=o(/version\/[\d._]+/g):n==="firefox"?a=o(/firefox\/[\d._]+/g):n==="opera"?a=o(/opr\/[\d._]+/g):n==="iexplore"?a=o(/(msie [\d._]+)|(rv:[\d._]+)/g):n==="edge"&&(a=o(/edge\/[\d._]+/g)),{browser:{name:n,version:a},engine:{name:t,version:i}}};return{userAgentInfo:()=>{const t=u(),n=d(t),i=p();return b({system:t,platform:n},i)}}},{userAgentInfo:pe}=de();pe();function fe(r,e){return V.request({url:"/query/flowExampleInfo",method:"post",data:r,params:e})}function ce(r,e){return V.request({url:"/query/elementInfo",method:"post",data:r,params:e})}var ge={__name:"detail",setup(r,{expose:e}){const o=m(!1),u=m(""),d=m(),p={page:1,size:10,total:0};async function g({pagination:i}){const{page:a,size:y}=i,s=await ce({requestId:u.value,page:a,size:y});return{...s,records:s.elementExampleList.map(l=>{const{oilCard:c,...w}=l;return{...w,...c}})}}const t=async i=>{u.value=i.id,o.value=!0},n=$(()=>[{label:"\u529F\u80FD\u540D\u79F0",prop:"functionName"},{prop:"flowElementName",label:"\u8282\u70B9\u540D\u79F0"},{prop:"status",label:"\u6267\u884C\u72B6\u6001",render:({row:i})=>i.status==="SUSS"?"\u6210\u529F":"\u5931\u8D25"},{label:"\u5165\u53C2",prop:"requestParam",width:320,render:({row:i})=>P(S("json-viewer"),{value:i.requestParam,copyable:!0,sort:!0,"expand-depth":0},null)},{label:"\u51FA\u53C2",prop:"returnParam",width:320,render:({row:i})=>P(S("json-viewer"),{value:i.returnParam,copyable:!0,sort:!0,"expand-depth":0},null)},{label:"\u4E8B\u52A1\u72B6\u6001",prop:"transactionStatus"},{label:"\u5F02\u5E38\u4FE1\u606F",prop:"exception"}]);return e({show:t}),(i,a)=>{const y=S("yun-pro-table"),s=S("yun-drawer");return F(),U(s,{modelValue:o.value,"onUpdate:modelValue":a[1]||(a[1]=l=>o.value=l),title:"\u8BE6\u60C5",size:"X-large"},{default:N(()=>[o.value?(F(),U(y,{key:0,ref_key:"tableRef",ref:d,pagination:p,"onUpdate:pagination":a[0]||(a[0]=l=>p=l),"table-columns":k(n),"remote-method":g,"table-props":{stripe:!1}},null,8,["table-columns"])):G("v-if",!0)]),_:1},8,["modelValue"])}}},me={__name:"index",setup(r){const e=m(null),o=s=>{e.value.show(s)},u=[{label:"\u5E8F\u53F7",type:"index"},{label:"\u529F\u80FD\u540D\u79F0",prop:"functionName"},{label:"\u8BF7\u6C42\u7F16\u53F7",prop:"id"},{label:"\u6267\u884C\u72B6\u6001",prop:"status",render:({row:s})=>s.status==="SUSS"?"\u6210\u529F":"\u5931\u8D25"},{label:"\u4E8B\u52A1\u72B6\u6001",prop:"transactionStatus"},{label:"\u64CD\u4F5C",prop:"action",render:({row:s})=>P(S("el-button"),{type:"action",onClick:()=>o(s)},{default:()=>[W("\u67E5\u770B\u8BE6\u60C5")]})}],d=[I("functionName","\u529F\u80FD\u540D\u79F0"),I("id","\u8BF7\u6C42\u7F16\u53F7")],p=m({}),{pagination:g,remoteMethod:t,tableProps:n,proTableRef:i,filterTableData:a}=ue({apiFn:fe,extParams:{},extQuerys:{sort:"createTime__DESC"},optimize:!0,async paramsHandler(s){return{...JSON.parse(JSON.stringify(s))}},responseHandler(s){const{flowExampleList:l,total:c}=s;return{records:l,total:c}},plugins:{config:{columns:u,searchFields:d},list:["SEARCH_PLUS"]}}),y=({searchData:s,filterData:l,pagination:c})=>{const w={...s,page:c.page,size:c.pageSize};return t({searchData:w,filterData:l,pagination:c})};return(s,l)=>{const c=S("yun-pro-table"),w=S("el-card");return F(),J(X,null,[P(w,{"body-style":{padding:"0 24px 24px 24px"},shadow:"never"},{default:N(()=>[P(c,{ref_key:"proTableRef",ref:i,pagination:k(g),"onUpdate:pagination":l[0]||(l[0]=h=>D(g)?g.value=h:null),"filter-data":k(a),"onUpdate:filter-data":l[1]||(l[1]=h=>D(a)?a.value=h:null),searchData:p.value,"onUpdate:searchData":l[2]||(l[2]=h=>p.value=h),"search-fields":d,"table-columns":u,"remote-method":y,"table-props":k(n)},null,8,["pagination","filter-data","searchData","table-props"])]),_:1}),P(ge,{ref_key:"detailRef",ref:e},null,512)],64)}}};var ye=Z(me,[["__scopeId","data-v-a884299e"]]);export{ye as default};
