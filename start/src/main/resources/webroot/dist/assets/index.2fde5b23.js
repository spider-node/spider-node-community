import{J,r as F,K as O,b as T,H as M,g as r,o as t,v as p,w as l,c as m,i as d,L as q,k as $,a as D,h as E,F as v,l as _,x as L}from"./index.a06947c9.js";const z=[{text1:1,text2:"kg",text3:37646.39,text4:2.2,text5:2885.24},{text1:2,text2:"kg",text3:20230.56,text4:2.5,text5:18748.17},{text1:3,text2:"kg",text3:27634.56,text4:3,text5:27634.56},{text1:4,text2:"kg",text3:21925.62,text4:3.5,text5:34779.8},{text1:5,text2:"kg",text3:4628.44,text4:2.4,text5:18146.43}],I={form1:"100000000000001",form2:"\u6210\u90FD\u8FD0\u8354\u679D\u79D1\u6280\u6709\u9650\u516C\u53F8",form3:"12312312314213123123",form4:"",form5:"\u5F20\u4E09",form6:"",form7:"13422224444",form8:"\u6210\u90FD\u5E02\u53CC\u6D41\u533A\u6021\u99A8\u5BB6\u56ED\u8FBE\u4EBA\u8857\u8D4F\u73A9\u57CE\u4E00\u5C4298\u300199\u53F7",form9:"2022-01-01"},Y=[{label:"\u8425\u4E1A\u6267\u7167",url:"https://gimg2.baidu.com/image_search/src=http%3A%2F%2F5b0988e595225.cdn.sohucs.com%2Fq_70%2Cc_zoom%2Cw_640%2Fimages%2F20180108%2F8fbd686d252d4286b8d72f1795bf806a.jpeg&refer=http%3A%2F%2F5b0988e595225.cdn.sohucs.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=auto?sec=1666174374&t=27b67bd09a4367e10907db0180334874"},{label:"\u6CD5\u4EBA\u8EAB\u4EFD\u8BC1\u6B63\u9762",url:"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fnimg.ws.126.net%2F%3Furl%3Dhttp%3A%2F%2Fdingyue.ws.126.net%2F2021%2F0703%2Fc5d2e807j00qvmr2n001nc000d600nec.jpg%26thumbnail%3D650x2147483647%26quality%3D80%26type%3Djpg&refer=http%3A%2F%2Fnimg.ws.126.net&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=auto?sec=1666231590&t=7eae600452589cf22bc20bb423190405"},{label:"\u6CD5\u4EBA\u8EAB\u4EFD\u8BC1\u53CD\u9762",url:"https://img1.baidu.com/it/u=3620268305,1989959238&fm=253&fmt=auto&app=120&f=JPEG?w=1280&h=800"}],H={images:Y,listData:I,tableData:z},S=(e=0)=>e.toFixed(2).replace(/\d+/,o=>o.replace(/(\d)(?=(?:\d{3})+$)/g,"$1,")),V=[{label:"\u5E8F\u53F7",prop:"text1"},{label:"\u89C4\u683C\u578B\u53F7",prop:"text2"},{label:"\u4E0D\u542B\u7A0E\u91D1\u989D\uFF08\u5143\uFF09",prop:"text3",formatter:e=>e.text3?S(e.text3):"--"},{label:"\u7A0E\u7387\uFF08%\uFF09",prop:"text4",formatter:e=>e.text4?e.text4.toFixed(1):"--"},{label:"\u7A0E\u989D\uFF08\u5143\uFF09",prop:"text5",formatter:e=>e.text5?S(e.text3):"--"}],P=[{label:"\u7EC4\u7EC7\u7F16\u53F7",prop:"form1"},{label:"\u516C\u53F8\u540D\u79F0",prop:"form2"},{label:"\u7EDF\u4E00\u793E\u4F1A\u4FE1\u7528\u4EE3\u7801",prop:"form3"},{label:"\u56FA\u5B9A\u7535\u8BDD",prop:"form4"},{label:"\u6CD5\u4EBA\u59D3\u540D",prop:"form5"},{label:"\u8054\u7CFB\u4EBA",prop:"form6"},{label:"\u8054\u7CFB\u4EBA\u624B\u673A",prop:"form7"},{label:"\u5730\u5740",prop:"form8"},{label:"\u8425\u4E1A\u6267\u7167\u6CE8\u518C\u65E5\u671F",prop:"form9",type:"date",formatter:e=>e?J(e).format("YYYY-MM-DD"):"--"}],G=()=>{const e=F(H),o=F(!1),i=F(JSON.parse(JSON.stringify(e.value))),f=F([]);O(()=>o.value,n=>{n?f.value=new Array(e.value.tableData.length).fill(!0):f.value=[]});const u=n=>{i.value=JSON.parse(JSON.stringify(n)),o.value=!0},c=()=>{o.value=!1},k=()=>{const n=e;n.value=JSON.parse(JSON.stringify(i.value)),o.value=!1},b=n=>{const w=n;Object.keys(n).forEach(C=>{C!=="text1"&&(w[C]="")})},h=n=>{const w=e;w.value.tableData=i.value.tableData,f.value.splice(n,1,!1)},g=F(V);return O(()=>o.value,n=>{n?g.value=[...V,{label:"\u64CD\u4F5C",prop:"action",width:170}]:g.value=[...V]}),{isEdit:o,formData:i,infoData:e,tableCol:g,editRowList:f,LISTCOL:P,clear:b,saveRow:h,edit:u,cancel:c,save:k}};const K={name:"UpLoadOnce",components:{},props:{imageUrl:{type:String,default:""},disabled:{type:Boolean,default:!0}},emits:["update:imageUrl","change"],data(){return{upLoadUrl:"//otms-web-plus.hope-saas-plus.qa.yunlizhi.net/bfs_oss/upload",uploadHeader:{Authorization:`Bearer ${M()}`},uploadData:{fileExtension:"png"},loading:!1,percentage:0,dialogVisible:!1}},methods:{beforeAvatarUpload(e){this.percentage=0;const o=e.type,i=e.size/1024/1024<5,f=["png","jpg","jpeg"].some(c=>o.endsWith(c));f||this.$message.error("\u53EA\u652F\u6301png\u548Cjpg\u683C\u5F0F\u7684\u6587\u4EF6!"),i||this.$message.error("\u4E0A\u4F20\u56FE\u7247\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC7 5MB!");const u=e.name.split(".").pop();return this.uploadData.fileExtension=u,f&&i},handleOnProgress(e,o){this.loading=!0,this.percentage=Math.floor(o.percentage)},handleAvatarSuccess(e){this.loading=!1;const{url:o}=e.data[0]||e.data;this.$emit("update:imageUrl",o),this.$emit("change")},handleRemove(){this.$emit("update:imageUrl","")},uploadError(){this.$message({type:"info",message:"\u4E0A\u4F20\u5931\u8D25"})}}},W={key:0,class:"percentage"},Q={key:1,class:"avatar-uploader-icon"},X=D("i",{class:"yun-iconfont icon-add"},null,-1),Z=[X],ee={key:1,class:"image"};function te(e,o,i,f,u,c){const k=r("el-progress"),b=r("el-upload"),h=r("el-image");return i.imageUrl?(t(),m("div",ee,[d(h,{class:"avatar",src:i.imageUrl,"preview-src-list":[i.imageUrl],fit:"contain"},null,8,["src","preview-src-list"]),i.disabled?(t(),m("i",{key:0,class:"yun-iconfont icon-a-cancelquxiao",onClick:o[0]||(o[0]=q((...g)=>c.handleRemove&&c.handleRemove(...g),["stop"]))})):$("v-if",!0)])):(t(),p(b,{key:0,class:"avatar-uploader",action:u.upLoadUrl,headers:u.uploadHeader,data:u.uploadData,accept:"image/*","show-file-list":!1,"on-progress":c.handleOnProgress,"on-success":c.handleAvatarSuccess,"on-error":c.uploadError,"before-upload":c.beforeAvatarUpload},{default:l(()=>[u.loading?(t(),m("div",W,[d(k,{type:"circle",percentage:u.percentage,width:60},null,8,["percentage"])])):(t(),m("div",Q,Z))]),_:1},8,["action","headers","data","on-progress","on-success","on-error","before-upload"]))}var ae=T(K,[["render",te]]);const oe={name:"EditDetail",components:{Upload:ae},setup(){return{...G()}}},le={class:"editDetail-warpper"},se={class:"photo"},re={class:"image-container"},ne={class:"editDetail-footer"};function ie(e,o,i,f,u,c){const k=r("el-date-picker"),b=r("el-input"),h=r("el-form-item"),g=r("el-col"),n=r("el-row"),w=r("yun-descriptions-item"),C=r("yun-descriptions"),U=r("el-card"),N=r("upload"),R=r("el-image"),x=r("el-button"),j=r("yun-table"),B=r("el-form");return t(),p(U,{class:"editDetail",shadow:"never"},{default:l(()=>[D("div",le,[d(B,{ref:"ruleForm",model:e.formData,"label-suffix":":","label-width":"140px"},{default:l(()=>[d(U,{shadow:"never",header:"\u8FD0\u5355\u53F7\uFF1A232323232",border:!1,"header-padding":"16px 0px","body-style":{padding:0}},{default:l(()=>[e.isEdit?(t(),p(n,{key:0,gutter:16},{default:l(()=>[(t(!0),m(v,null,E(e.LISTCOL,a=>(t(),p(g,{key:a.prop,span:8},{default:l(()=>[d(h,{prop:`listData.${e.index}`,label:a.label},{default:l(()=>[a.type==="date"?(t(),p(k,{key:0,modelValue:e.formData.listData[a.prop],"onUpdate:modelValue":s=>e.formData.listData[a.prop]=s,style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue"])):(t(),p(b,{key:1,modelValue:e.formData.listData[a.prop],"onUpdate:modelValue":s=>e.formData.listData[a.prop]=s},null,8,["modelValue","onUpdate:modelValue"]))]),_:2},1032,["prop","label"])]),_:2},1024))),128))]),_:1})):(t(),p(C,{key:1},{default:l(()=>[(t(!0),m(v,null,E(e.LISTCOL,a=>(t(),p(w,{key:a.prop,label:a.label},{default:l(()=>[_(L(a.formatter?a.formatter(e.infoData.listData[a.prop]):e.infoData.listData[a.prop]||"--"),1)]),_:2},1032,["label"]))),128))]),_:1}))]),_:1}),d(U,{shadow:"never",header:"\u7528\u6237\u4FE1\u606F",border:!1,"header-padding":"16px 0px","body-style":{padding:0}},{default:l(()=>[D("div",se,[(t(!0),m(v,null,E(e.infoData.images,(a,s)=>(t(),p(h,{key:s,prop:`images.${s}.url`,"label-width":"0"},{default:l(()=>[D("div",re,[e.isEdit?(t(),p(N,{key:0,"image-url":e.formData.images[s].url,"onUpdate:image-url":y=>e.formData.images[s].url=y},null,8,["image-url","onUpdate:image-url"])):(t(),p(R,{key:1,src:e.infoData.images[s].url,"preview-src-list":[e.infoData.images[s]].url,fit:"contain"},null,8,["src","preview-src-list"]))]),D("span",null,L(e.infoData.images[s].label),1)]),_:2},1032,["prop"]))),128))])]),_:1}),d(U,{shadow:"never",header:"\u8BA2\u5355\u4FE1\u606F",border:!1,"header-padding":"16px 0px","body-style":{padding:0}},{default:l(()=>[d(j,{size:"large",columns:e.tableCol,data:e.isEdit?e.formData.tableData:e.infoData.tableData,"show-table-setting":!0,"table-header-key":"editDetail",stripe:!0},{default:l(({row:a,column:s,$index:y})=>[e.isEdit&&s.property!=="text1"&&e.editRowList[y]?(t(),p(b,{key:0,modelValue:a[s.property],"onUpdate:modelValue":A=>a[s.property]=A},null,8,["modelValue","onUpdate:modelValue"])):(t(),m(v,{key:1},[_(L(a[s.property]),1)],64))]),action:l(({row:a,column:s,$index:y})=>[e.isEdit&&s.property!=="text1"&&e.editRowList[y]?(t(),m(v,{key:0},[d(x,{type:"action",onClick:A=>e.clear(a)},{default:l(()=>[_(" \u6E05\u7A7A ")]),_:2},1032,["onClick"]),d(x,{type:"action",onClick:A=>e.saveRow(y)},{default:l(()=>[_(" \u4FDD\u5B58 ")]),_:2},1032,["onClick"])],64)):$("v-if",!0)]),_:1},8,["columns","data"])]),_:1})]),_:1},8,["model"])]),D("div",ne,[e.isEdit?(t(),m(v,{key:1},[d(x,{type:"primary",onClick:e.save},{default:l(()=>[_(" \u4FDD\u5B58 ")]),_:1},8,["onClick"]),d(x,{onClick:e.cancel},{default:l(()=>[_(" \u53D6\u6D88 ")]),_:1},8,["onClick"])],64)):(t(),p(x,{key:0,type:"primary",onClick:o[0]||(o[0]=a=>e.edit(e.infoData))},{default:l(()=>[_(" \u7F16\u8F91 ")]),_:1}))])]),_:1})}var de=T(oe,[["render",ie],["__scopeId","data-v-01772bcc"]]);export{de as default};
