import{r as w,$ as L,a0 as z,a1 as D}from"./index.14aff2f2.js";import{s as H}from"./index.82e1f583.js";function U(i){for(const e in i)for(const t in i[e])(String(i[e][t]).length===10||String(i[e][t]).length===13)&&(t.includes("time")||t.includes("Time"))&&i[e][t]&&!i[e][t].toString().includes(":")&&(i[e][t]=z(i[e][t]).format("YYYY-MM-DD HH:mm:ss"))}function V(i){for(const e in i){const t=i[e];(t===""||Array.isArray(t)&&t.length===0)&&delete i[e]}}function x(i){return L(i)?i:w(i)}const E={SEARCH_PLUS:"SEARCH_PLUS"};function Y(i,e){var t,a,f;try{if(!i||!((t=i==null?void 0:i.list)!=null&&t.includes(E.SEARCH_PLUS)))return;if(i.list.includes(E.SEARCH_PLUS)){const d=(a=i==null?void 0:i.config)==null?void 0:a.columns,p=((f=i==null?void 0:i.config)==null?void 0:f.searchFields)||[];for(const n in e){const o=d.find(s=>(s==null?void 0:s.prop)===n&&((s==null?void 0:s.filterAlias)||(s==null?void 0:s.fieldMapToTime))),r=p.find(s=>(s==null?void 0:s.prop)===n&&((s==null?void 0:s.filterAlias)||(s==null?void 0:s.fieldMapToTime)));o&&(o.filterAlias&&(e[o.filterAlias]=e[n]),o.fieldMapToTime&&e[o.prop]&&Array.isArray(e[o.prop])&&(e[o.fieldMapToTime[0]]=e[n][0],e[o.fieldMapToTime[1]]=e[n][1]),delete e[n]),r&&(r.filterAlias&&(e[r.filterAlias]=e[n]),r.fieldMapToTime&&e[r.prop]&&Array.isArray(e[r.prop])&&(e[r.fieldMapToTime[0]]=e[n][0],e[r.fieldMapToTime[1]]=e[n][1]),delete e[n])}}}catch(d){console.log(d)}}function j(i,e){var t;const a=(t=i==null?void 0:i.config)==null?void 0:t.columns;try{if(a){for(const f in a)if(a[f].prop&&a[f].prop.includes("."))for(const d in e)e[d][a[f].prop]=D.exports.get(e[d],a[f].prop)}}catch(f){console.log(f)}}function O(i){const{apiFn:e,extParams:t={},extQuerys:a={},isClearReqEmptyField:f=!0,paramsHandler:d,querysHandler:p,responseHandler:n,customTotalHandler:o,optimize:r,plugins:s}=i,h=w([]),M=x(e),A=x(t),k=x(a),S=w(null),_=w({background:!0,page:1,pageSize:10,sort:"",layout:"total, sizes, prev, pager, next, jumper",pageSizes:[10,30,50,100],total:0}),q=w({}),b=w({});async function C({searchData:l,filterData:c,pagination:u}){r&&(h.value=[]);const T=u.sort||k.value.sort;let m={size:u.size||u.pageSize,page:u.page,...k.value,sort:T},g={...l,...c,...A.value};Y(s,g),f&&V(g);try{g=d?await d(g):g}catch(I){console.log(I)}m=p?p(m):m,b.value={params:g,querys:m};const v=await M.value(g,m);_.value.total="total"in v?v.total:o&&o(v);const R=v.records||v,y=n?n(R):R;return j(s,y),U(y),y}function P(l){var c;l&&(A.value={...A.value,...l}),(c=S==null?void 0:S.value)==null||c.getData()}function F({column:l,prop:c,order:u}){if(c&&u){const T={descending:"DESC",ascending:"ASC"};_.value.sort=`${l.sortAlias||l.property}__${T[l.order]}`}else _.value.sort="";P()}return{tableData:h,proTableRef:S,reLoad:P,pagination:_,remoteMethod:C,tableProps:{transformation:l=>l===void 0||l===""||l===null?"--":l,showTableSetting:!0,onSortChange:({column:l,prop:c,order:u})=>F({column:l,prop:c,order:u}),yunPagination:!0},filterTableData:q,finalPostResult:b}}const $=()=>{const i=window.navigator.userAgent.toLowerCase(),e=n=>n.test(i),t=n=>{const o=i.match(n);return o?o.toString().replace(/[^0-9|_.]/g,"").replace(/_/g,"."):null},a=()=>{let n="unknow";e(/windows|win32|win64|wow32|wow64/g)?n="windows":e(/macintosh|macintel/g)?n="macos":e(/x11/g)?n="linux":e(/android|adr/g)?n="android":e(/ios|iphone|ipad|ipod|iwatch/g)&&(n="ios");let o="unknow";return n==="windows"?e(/windows nt 5.0|windows 2000/g)?o="2000":e(/windows nt 5.1|windows xp/g)?o="xp":e(/windows nt 5.2|windows 2003/g)?o="2003":e(/windows nt 6.0|windows vista/g)?o="vista":e(/windows nt 6.1|windows 7/g)?o="7":e(/windows nt 6.2|windows 8/g)?o="8":e(/windows nt 6.3|windows 8.1/g)?o="8.1":e(/windows nt 10.0|windows 10/g)&&(o="10"):n==="macos"?o=t(/os x [\d._]+/g):n==="android"?o=t(/android [\d._]+/g):n==="ios"&&(o=t(/os [\d._]+/g)),{name:n,version:o}},f=n=>{let o="unknow";return n.name==="windows"||n.name==="macos"||n.name==="linux"?o="desktop":(n.name==="android"||n.name==="ios"||e(/mobile/g))&&(o="mobile"),o},d=()=>{let n="unknow",o="unknow";e(/applewebkit/g)?(n="webkit",e(/edg/g)?o="edge":e(/opr/g)?o="opera":e(/chrome/g)?o="chrome":e(/safari/g)&&(o="safari")):e(/gecko/g)&&e(/firefox/g)?(n="gecko",o="firefox"):e(/presto/g)?(n="presto",o="opera"):e(/trident|compatible|msie/g)&&(n="trident",o="iexplore");let r="unknow";n==="webkit"?r=t(/applewebkit\/[\d._]+/g):n==="gecko"?r=t(/gecko\/[\d._]+/g):n==="presto"?r=t(/presto\/[\d._]+/g):n==="trident"&&(r=t(/trident\/[\d._]+/g));let s="unknow";const h=t(/chrome\/[\d._]+/g);return o==="chrome"?s=t(/chrome\/[\d._]+/g):o==="safari"?s=t(/version\/[\d._]+/g):o==="firefox"?s=t(/firefox\/[\d._]+/g):o==="opera"?s=t(/opr\/[\d._]+/g):o==="iexplore"?s=t(/(msie [\d._]+)|(rv:[\d._]+)/g):o==="edge"&&(s=t(/edge\/[\d._]+/g)),{chrome:h,browser:{name:o,version:s},engine:{name:n,version:r}}};return{userAgentInfo:()=>{const n=a(),o=f(n),r=d();return{system:n,platform:o,...r}}}},{userAgentInfo:B}=$();B();function J(i,e){return H.request({url:"/query/flowExampleInfo",method:"post",data:i,params:e})}function K(i,e){return H.request({url:"/query/elementInfo",method:"post",data:i,params:e})}export{J as a,K as q,O as u};
